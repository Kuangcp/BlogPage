<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>MySQL.md | Kuangcp Blog | Javaer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="">
    <meta name="description" content="目录 start  Mysql 安装 Ubuntu安装配置MySQL Docker安装 图形化客户端     基本数据类型 数值类型 short int decimal   字符类型 varchar text   LongBlob   基本组成 数据编码 数据库 创建 导出 修改   表 创建 修改表定义 增删字段     视图 触发器 【创建单语句的触发器】 【创建多语句的触发器】 【NEW 和">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL.md">
<meta property="og:url" content="http://blog.kuangcp.top/2018/12/14/Memo-Database-MySQL/index.html">
<meta property="og:site_name" content="Kuangcp Blog">
<meta property="og:description" content="目录 start  Mysql 安装 Ubuntu安装配置MySQL Docker安装 图形化客户端     基本数据类型 数值类型 short int decimal   字符类型 varchar text   LongBlob   基本组成 数据编码 数据库 创建 导出 修改   表 创建 修改表定义 增删字段     视图 触发器 【创建单语句的触发器】 【创建多语句的触发器】 【NEW 和">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-12-14T12:42:49.254Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="MySQL.md">
<meta name="twitter:description" content="目录 start  Mysql 安装 Ubuntu安装配置MySQL Docker安装 图形化客户端     基本数据类型 数值类型 short int decimal   字符类型 varchar text   LongBlob   基本组成 数据编码 数据库 创建 导出 修改   表 创建 修改表定义 增删字段     视图 触发器 【创建单语句的触发器】 【创建多语句的触发器】 【NEW 和">
    
        <link rel="alternate" type="application/atom+xml" title="Kuangcp Blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Kuangcp</h5>
          <a href="mailto:kuangcp@aliyun.com" title="kuangcp@aliyun.com" class="mail">kuangcp@aliyun.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/">
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives">
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags">
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories">
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/kuangcp" target="_blank">
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">MySQL.md</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">MySQL.md</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-12-14T12:42:49.254Z" itemprop="datePublished" class="page-time">
  2018-12-14
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Mysql"><span class="post-toc-number">1.</span> <span class="post-toc-text">Mysql</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#安装"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">安装</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Ubuntu安装配置MySQL"><span class="post-toc-number">1.1.1.</span> <span class="post-toc-text">Ubuntu安装配置MySQL</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Docker安装"><span class="post-toc-number">1.1.2.</span> <span class="post-toc-text">Docker安装</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#图形化客户端"><span class="post-toc-number">1.1.3.</span> <span class="post-toc-text">图形化客户端</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#基本数据类型"><span class="post-toc-number">2.</span> <span class="post-toc-text">基本数据类型</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#数值类型"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">数值类型</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#short"><span class="post-toc-number">2.1.1.</span> <span class="post-toc-text">short</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#int"><span class="post-toc-number">2.1.2.</span> <span class="post-toc-text">int</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#decimal"><span class="post-toc-number">2.1.3.</span> <span class="post-toc-text">decimal</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#字符类型"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">字符类型</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#varchar"><span class="post-toc-number">2.2.1.</span> <span class="post-toc-text">varchar</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#text"><span class="post-toc-number">2.2.2.</span> <span class="post-toc-text">text</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#LongBlob"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">LongBlob</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#基本组成"><span class="post-toc-number">3.</span> <span class="post-toc-text">基本组成</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#数据编码"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">数据编码</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#数据库"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">数据库</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#创建"><span class="post-toc-number">3.2.1.</span> <span class="post-toc-text">创建</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#导出"><span class="post-toc-number">3.2.2.</span> <span class="post-toc-text">导出</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#修改"><span class="post-toc-number">3.2.3.</span> <span class="post-toc-text">修改</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#表"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">表</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#创建-1"><span class="post-toc-number">3.3.1.</span> <span class="post-toc-text">创建</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#修改表定义"><span class="post-toc-number">3.3.2.</span> <span class="post-toc-text">修改表定义</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#增删字段"><span class="post-toc-number">3.3.2.1.</span> <span class="post-toc-text">增删字段</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#视图"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">视图</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#触发器"><span class="post-toc-number">3.5.</span> <span class="post-toc-text">触发器</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#【创建单语句的触发器】"><span class="post-toc-number">3.5.1.</span> <span class="post-toc-text">【创建单语句的触发器】</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#【创建多语句的触发器】"><span class="post-toc-number">3.5.2.</span> <span class="post-toc-text">【创建多语句的触发器】</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#【NEW-和-OLD关键字】"><span class="post-toc-number">3.5.3.</span> <span class="post-toc-text">【NEW 和 OLD关键字】</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#存储过程"><span class="post-toc-number">3.6.</span> <span class="post-toc-text">存储过程</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#基本结构示例："><span class="post-toc-number">3.6.1.</span> <span class="post-toc-text">基本结构示例：</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#函数"><span class="post-toc-number">3.7.</span> <span class="post-toc-text">函数</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#【简单示例】"><span class="post-toc-number">3.7.1.</span> <span class="post-toc-text">【简单示例】</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#1-mysql常用命令集合"><span class="post-toc-number">4.</span> <span class="post-toc-text">1.mysql常用命令集合</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#查看数据库参数"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">查看数据库参数</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#查看连接状况"><span class="post-toc-number">4.1.1.</span> <span class="post-toc-text">查看连接状况</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-1【自增长】"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">1.1【自增长】</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-2【主键约束的修改】"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">1.2【主键约束的修改】</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-3【修改表名】"><span class="post-toc-number">4.4.</span> <span class="post-toc-text">1.3【修改表名】</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-4【定界符】"><span class="post-toc-number">4.5.</span> <span class="post-toc-text">1.4【定界符】</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-5【已有表数据，新建表】"><span class="post-toc-number">4.6.</span> <span class="post-toc-text">1.5【已有表数据，新建表】</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-6【查看所有连接状态】"><span class="post-toc-number">4.7.</span> <span class="post-toc-text">1.6【查看所有连接状态】</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-7【查看表的状态】"><span class="post-toc-number">4.8.</span> <span class="post-toc-text">1.7【查看表的状态】</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-8【关于时间-】"><span class="post-toc-number">4.9.</span> <span class="post-toc-text">1.8【关于时间 】</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-8-1【常用函数】"><span class="post-toc-number">4.9.1.</span> <span class="post-toc-text">1.8.1【常用函数】</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-8-2【获取当前时间与i个月之间的天数】"><span class="post-toc-number">4.9.2.</span> <span class="post-toc-text">1.8.2【获取当前时间与i个月之间的天数】</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-8-3-datetime和timestamp区别"><span class="post-toc-number">4.9.3.</span> <span class="post-toc-text">1.8.3 datetime和timestamp区别</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-9-【插入外码】"><span class="post-toc-number">4.10.</span> <span class="post-toc-text">1.9 【插入外码】</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#2-【变量】"><span class="post-toc-number">5.</span> <span class="post-toc-text">2.【变量】</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#3-【基本流程语法】"><span class="post-toc-number">6.</span> <span class="post-toc-text">3.【基本流程语法】</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#7-【异常】"><span class="post-toc-number">7.</span> <span class="post-toc-text">7.【异常】</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#8-【用户管理】"><span class="post-toc-number">8.</span> <span class="post-toc-text">8.【用户管理】</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#查看"><span class="post-toc-number">8.1.</span> <span class="post-toc-text">查看</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#创建-2"><span class="post-toc-number">8.2.</span> <span class="post-toc-text">创建</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#修改-1"><span class="post-toc-number">8.3.</span> <span class="post-toc-text">修改</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#【授权】"><span class="post-toc-number">8.3.1.</span> <span class="post-toc-text">【授权】</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#查询"><span class="post-toc-number">9.</span> <span class="post-toc-text">查询</span></a></li></ol>
        </nav>
    </aside>


<article id="post-Memo-Database-MySQL" class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">MySQL.md</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-12-14 20:42:49" datetime="2018-12-14T12:42:49.254Z" itemprop="datePublished">2018-12-14</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style="display:none">
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p><strong>目录 start</strong></p>
<ol>
<li><a href="#mysql">Mysql</a><ol>
<li><a href="#安装">安装</a><ol>
<li><a href="#ubuntu安装配置mysql">Ubuntu安装配置MySQL</a></li>
<li><a href="#docker安装">Docker安装</a></li>
<li><a href="#图形化客户端">图形化客户端</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#基本数据类型">基本数据类型</a><ol>
<li><a href="#数值类型">数值类型</a><ol>
<li><a href="#short">short</a></li>
<li><a href="#int">int</a></li>
<li><a href="#decimal">decimal</a></li>
</ol>
</li>
<li><a href="#字符类型">字符类型</a><ol>
<li><a href="#varchar">varchar</a></li>
<li><a href="#text">text</a></li>
</ol>
</li>
<li><a href="#longblob">LongBlob</a></li>
</ol>
</li>
<li><a href="#基本组成">基本组成</a><ol>
<li><a href="#数据编码">数据编码</a></li>
<li><a href="#数据库">数据库</a><ol>
<li><a href="#创建">创建</a></li>
<li><a href="#导出">导出</a></li>
<li><a href="#修改">修改</a></li>
</ol>
</li>
<li><a href="#表">表</a><ol>
<li><a href="#创建">创建</a></li>
<li><a href="#修改表定义">修改表定义</a><ol>
<li><a href="#增删字段">增删字段</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#视图">视图</a></li>
<li><a href="#触发器">触发器</a><ol>
<li><a href="#创建单语句的触发器">【创建单语句的触发器】</a></li>
<li><a href="#创建多语句的触发器">【创建多语句的触发器】</a></li>
<li><a href="#new-和-old关键字">【NEW 和 OLD关键字】</a></li>
</ol>
</li>
<li><a href="#存储过程">存储过程</a><ol>
<li><a href="#基本结构示例">基本结构示例：</a></li>
</ol>
</li>
<li><a href="#函数">函数</a><ol>
<li><a href="#简单示例">【简单示例】</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#1mysql常用命令集合">1.mysql常用命令集合</a><ol>
<li><a href="#查看数据库参数">查看数据库参数</a><ol>
<li><a href="#查看连接状况">查看连接状况</a></li>
</ol>
</li>
<li><a href="#11自增长">1.1【自增长】</a></li>
<li><a href="#12主键约束的修改">1.2【主键约束的修改】</a></li>
<li><a href="#13修改表名">1.3【修改表名】</a></li>
<li><a href="#14定界符">1.4【定界符】</a></li>
<li><a href="#15已有表数据新建表">1.5【已有表数据，新建表】</a></li>
<li><a href="#16查看所有连接状态">1.6【查看所有连接状态】</a></li>
<li><a href="#17查看表的状态">1.7【查看表的状态】</a></li>
<li><a href="#18关于时间-">1.8【关于时间 】</a><ol>
<li><a href="#181常用函数">1.8.1【常用函数】</a></li>
<li><a href="#182获取当前时间与i个月之间的天数">1.8.2【获取当前时间与i个月之间的天数】</a></li>
<li><a href="#183-datetime和timestamp区别">1.8.3 datetime和timestamp区别</a></li>
</ol>
</li>
<li><a href="#19-插入外码">1.9 【插入外码】</a></li>
</ol>
</li>
<li><a href="#2变量">2.【变量】</a></li>
<li><a href="#3基本流程语法">3.【基本流程语法】</a></li>
<li><a href="#7异常">7.【异常】</a></li>
<li><a href="#8用户管理">8.【用户管理】</a><ol>
<li><a href="#查看">查看</a></li>
<li><a href="#创建">创建</a></li>
<li><a href="#修改">修改</a><ol>
<li><a href="#授权">【授权】</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#查询">查询</a></li>
</ol>
<p><strong>目录 end</strong>|<em>2018-12-13 12:06</em>| <a href="https://gitee.com/gin9" target="_blank" rel="noopener">码云</a> | <a href="http://blog.csdn.net/kcp606" target="_blank" rel="noopener">CSDN</a> | <a href="https://my.oschina.net/kcp1104" target="_blank" rel="noopener">OSChina</a> | <a href="http://www.cnblogs.com/kuangcp" target="_blank" rel="noopener">cnblogs</a></p>
<hr>
<h1 id="Mysql"><a href="#Mysql" class="headerlink" title="Mysql"></a>Mysql</h1><blockquote>
<p><a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">MySQL官方下载地址</a> | <a href="https://dev.mysql.com/doc/" target="_blank" rel="noopener">doc</a></p>
</blockquote>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="Ubuntu安装配置MySQL"><a href="#Ubuntu安装配置MySQL" class="headerlink" title="Ubuntu安装配置MySQL"></a>Ubuntu安装配置MySQL</h3><ul>
<li>更新列表<code>sudo apt-get update</code></li>
<li>安装MySQL <code>sudo apt-get install mysql-server mysql-client</code></li>
<li>检查服务是否已经开启 ： <code>sudo netstat -tap | grep mysql</code><ul>
<li>（启动显示cp 0 0 localhost.localdomain:mysql <em>:</em> LISTEN - ）</li>
</ul>
</li>
<li>启动服务 ： <code>sudo /etc/init.d/mysql restart</code></li>
<li>查看编码 ： <code>status</code> 或者 <code>show variables like &#39;character_set_%</code></li>
</ul>
<p>_配置_</p>
<ul>
<li>打开配置文件： <code>sudo gedit /etc/mysql/mysql.conf.d/mysqld.cnf</code><ul>
<li><code>[mysqld]</code>下添加一行： <code>character-set-server=utf8</code></li>
<li><code>[client]</code>下添加 <code>default-character-set = utf8</code></li>
<li>如果要允许远程访问，就注释掉 <code>bind-address</code></li>
<li>如果是服务器要配置远程访问 就 bind-address=服务器IP</li>
<li>确保skip-networking被删除或者屏蔽，否则不支持TCP/IP 访问</li>
</ul>
</li>
</ul>
<p>_重启_</p>
<ul>
<li>重启MySQL ：<code>sudo systemctl restart mysql</code></li>
</ul>
<h3 id="Docker安装"><a href="#Docker安装" class="headerlink" title="Docker安装"></a>Docker安装</h3><blockquote>
<p><a href="/Linux/Container/Container/DockerSoft.md#mysql">Docker安装MySQL</a> | <a href="http://www.infoq.com/cn/articles/can-mysql-run-in-docker?utm_campaign=rightbar_v2&amp;utm_source=infoq&amp;utm_medium=articles_link&amp;utm_content=link_text" target="_blank" rel="noopener">博客：Mysql有没有必要Docker化</a></p>
</blockquote>
<h3 id="图形化客户端"><a href="#图形化客户端" class="headerlink" title="图形化客户端"></a>图形化客户端</h3><blockquote>
<p>windows上就直接 MySQL-Font HeidiSQL Linux就终端了..虽然wine也能装这俩 | <a href="http://www.linuxidc.com/Linux/2015-01/111421.htm" target="_blank" rel="noopener">10个Mysql图形客户端</a></p>
</blockquote>
<hr>
<h1 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h1><blockquote>
<p><a href="http://www.cnblogs.com/bukudekong/archive/2011/06/27/2091590.html" target="_blank" rel="noopener">MySQL 数据类型</a></p>
</blockquote>
<h2 id="数值类型"><a href="#数值类型" class="headerlink" title="数值类型"></a>数值类型</h2><h3 id="short"><a href="#short" class="headerlink" title="short"></a>short</h3><h3 id="int"><a href="#int" class="headerlink" title="int"></a>int</h3><h3 id="decimal"><a href="#decimal" class="headerlink" title="decimal"></a>decimal</h3><ul>
<li>The declaration syntax for a DECIMAL column is DECIMAL(M,D). The ranges of values for the arguments are as follows:<ul>
<li>M is the maximum number of digits (the precision). It has a range of 1 to 65.</li>
<li>D is the number of digits to the right of the decimal point (the scale). It has a range of 0 to 30 and must be no larger than M. </li>
</ul>
</li>
<li>在MySQL 3.23 及以后的版本中，DECIMAL(M, D) 的取值范围等于早期版本中的DECIMAL(M + 2, D) 的取值范围。</li>
</ul>
<ol>
<li>当插入的整数部分的值超过了其表示范围后就直接忽略了小数部分的值，并以最大值填充。 </li>
<li>当整数部分合法，小数部分多余的位数，直接截断。</li>
</ol>
<h2 id="字符类型"><a href="#字符类型" class="headerlink" title="字符类型"></a>字符类型</h2><h3 id="varchar"><a href="#varchar" class="headerlink" title="varchar"></a>varchar</h3><h3 id="text"><a href="#text" class="headerlink" title="text"></a>text</h3><ul>
<li style="list-style: none"><input type="checkbox"> 后期完善</li>
</ul>
<h2 id="LongBlob"><a href="#LongBlob" class="headerlink" title="LongBlob"></a>LongBlob</h2><ul>
<li>这种数据类型可以直接把图像文件存到数据库中！<br>创建UTF8编码数据库 <code>CREATE DATABASE</code>test2<code>DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci</code></li>
</ul>
<hr>
<h1 id="基本组成"><a href="#基本组成" class="headerlink" title="基本组成"></a>基本组成</h1><h2 id="数据编码"><a href="#数据编码" class="headerlink" title="数据编码"></a>数据编码</h2><p>utf8 最大字节为3的非标准utf8实现<br>utf8mb4 才是真正意义上的 utf8 <code>5.5.3才开始支持</code></p>
<h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><blockquote>
<p>create database name;</p>
</blockquote>
<h3 id="导出"><a href="#导出" class="headerlink" title="导出"></a>导出</h3><blockquote>
<p>以下的 -p -h 参数依数据库的配置情况而定</p>
</blockquote>
<ol>
<li>只导出数据库的结构 <code>mysqldump -uroot -pmysql -d dbname &gt; /data/backup/sql/dbname.sql</code>  <ul>
<li>导出具体的表就在数据库名后加上 表名</li>
</ul>
</li>
<li>导出结构和数据就去掉-d参数, 导出具体的表同理</li>
<li>导入其实就是执行SQL文件 <code>source /path/to/dbname.sql</code></li>
</ol>
<blockquote>
<p><a href="https://blog.csdn.net/EASYgoing00/article/details/72885280" target="_blank" rel="noopener">java操作：mysql数据库导入、导出</a>  主要的思想是Java调用系统命令行执行命令后得到导出文件， 然后读取导出的文件 进一步操作</p>
</blockquote>
<h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><ul>
<li style="list-style: none"><input type="checkbox"> TODO 修改数据库</li>
</ul>
<h2 id="表"><a href="#表" class="headerlink" title="表"></a>表</h2><h3 id="创建-1"><a href="#创建-1" class="headerlink" title="创建"></a>创建</h3><ul>
<li><code>create table name (field int, field varchar(32)....);</code></li>
<li>查看表的创建语句 <code>show create table name;</code></li>
</ul>
<h3 id="修改表定义"><a href="#修改表定义" class="headerlink" title="修改表定义"></a>修改表定义</h3><ul>
<li style="list-style: none"><input type="checkbox"> TODO 修改表格</li>
</ul>
<p><em>重命名表格</em> <code>RENAME TABLE old TO new</code></p>
<h4 id="增删字段"><a href="#增删字段" class="headerlink" title="增删字段"></a>增删字段</h4><ul>
<li>增加字段 <code>alter table name add field1 int, field2 varchar(20);</code></li>
<li>删除字段 <code>alter table name drop column field1, drop column field2;</code></li>
</ul>
<hr>
<h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><blockquote>
<p>保障数据安全性，提高查询效率</p>
</blockquote>
<blockquote>
<p><a href="http://www.jb51.net/article/36363.htm" target="_blank" rel="noopener">参考博客: </a><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> [ALGORITHM]=&#123;UNDEFINED|<span class="keyword">MERGE</span>|TEMPTABLE&#125;]</span><br><span class="line">    <span class="keyword">VIEW</span> 视图名 [(属性清单)]</span><br><span class="line">    <span class="keyword">AS</span> <span class="keyword">SELECT</span> 语句</span><br><span class="line">    [<span class="keyword">WITH</span> [<span class="keyword">CASCADED</span>|<span class="keyword">LOCAL</span>] <span class="keyword">CHECK</span> <span class="keyword">OPTION</span>];</span><br></pre></td></tr></table></figure></p>
</blockquote>
<ul>
<li>ALGORITHM表示视图选择的算法（可选参数）<ul>
<li>UNDEFINED：MySQL将自动选择所要使用的算法</li>
<li>MERGE：将视图的语句与视图定义合并起来，使得视图定义的某一部分取代语句的对应部分</li>
<li>TEMPTABLE：将视图的结果存入临时表，然后使用临时表执行语句</li>
</ul>
</li>
<li>视图名表示要创建的视图的名称</li>
<li>属性清单表示视图中的列名，默认与SELECT查询结果中的列名相同（可选参数）</li>
<li>WITH CHECK OPTION表示更新视图时要保证在该试图的权限范围之内（可选参数）<ul>
<li>CASCADED：更新视图时要满足所有相关视图和表的条件</li>
<li>LOCAL：更新视图时，要满足该视图本身定义的条件即可<blockquote>
<p>tips：创建试图时最好加上WITH CASCADED CHECK OPTION参数，这种方式比较严格,可以保证数据的安全性</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h2 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h2><h3 id="【创建单语句的触发器】"><a href="#【创建单语句的触发器】" class="headerlink" title="【创建单语句的触发器】"></a>【创建单语句的触发器】</h3><ul>
<li><code>CREATE TRIGGER ins_sum BEFORE INSERT ON account FOR EACH ROW SET @sum = @sum + NEW.amount;</code></li>
<li><code>CREATE TRIGGER trigger_name trigger_time trigger_event ON tbl_name FOR EACH ROW trigger_stmt</code></li>
</ul>
<h3 id="【创建多语句的触发器】"><a href="#【创建多语句的触发器】" class="headerlink" title="【创建多语句的触发器】"></a>【创建多语句的触发器】</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TRIGGER</span> trigger_name trigger_time trigger_event</span><br><span class="line">    <span class="keyword">ON</span> tbl_name <span class="keyword">FOR</span> <span class="keyword">EACH</span> <span class="keyword">ROW</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    .......</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure>
<h3 id="【NEW-和-OLD关键字】"><a href="#【NEW-和-OLD关键字】" class="headerlink" title="【NEW 和 OLD关键字】"></a>【NEW 和 OLD关键字】</h3><ul>
<li>使用OLD和NEW关键字，能够访问受触发程序影响的行中的列（OLD和NEW不区分大小写）。在INSERT触发程序中，仅能使用NEW.col_name，没有旧行。</li>
<li>在DELETE触发程序中，仅能使用OLD.col_name，没有新行。在UPDATE触发程序中，可以使用OLD.col_name来引用更新前的某一行的列，也能使用NEW.col_name来引用更新后的行中的列。</li>
<li>用OLD命名的列是只读的。你可以引用它，但不能更改它。对于用NEW命名的列，如果具有SELECT权限，可引用它。</li>
<li>在BEFORE触发程序中，如果你具有UPDATE权限，可使用“SET NEW.col_name = value”更改它的值。这意味着，</li>
<li>你可以使用触发程序来更改将要插入到新行中的值，或用于更新行的值。</li>
<li>在BEFORE触发程序中，AUTO_INCREMENT列的NEW值为0，不是实际插入新记录时将自动生成的序列号。</li>
</ul>
<h2 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h2><h3 id="基本结构示例："><a href="#基本结构示例：" class="headerlink" title="基本结构示例："></a>基本结构示例：</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">-- 【loop】 要有iterate 和leave才是完整的</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> doiterate(p1 <span class="built_in">INT</span>)</span><br><span class="line">  <span class="keyword">BEGIN</span></span><br><span class="line">    label1: <span class="keyword">LOOP</span></span><br><span class="line">      <span class="keyword">SET</span> p1 = p1 + <span class="number">1</span>;</span><br><span class="line">      IF p1 &lt; 10 THEN ITERATE label1; END IF;</span><br><span class="line">      LEAVE label1;</span><br><span class="line">    <span class="keyword">END</span> <span class="keyword">LOOP</span> label1;</span><br><span class="line">    <span class="keyword">SET</span> @x = p1;</span><br><span class="line">  <span class="keyword">END</span></span><br><span class="line">  <span class="keyword">call</span> doiterate(<span class="number">7</span>);</span><br><span class="line">  <span class="keyword">select</span> @x;</span><br></pre></td></tr></table></figure>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="【简单示例】"><a href="#【简单示例】" class="headerlink" title="【简单示例】"></a>【简单示例】</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">---函数部分,修改定界符 </span></span><br><span class="line">delimiter //</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> hello (s <span class="built_in">CHAR</span>(<span class="number">20</span>)) <span class="keyword">RETURNS</span> <span class="built_in">CHAR</span>(<span class="number">50</span>)</span><br><span class="line"><span class="keyword">RETURN</span> <span class="keyword">CONCAT</span>(<span class="string">'Hello, '</span>,s,<span class="string">'!'</span>);</span><br><span class="line">//</span><br><span class="line"><span class="comment">--将定界符改回来，是第二句SQL语句</span></span><br><span class="line">delimiter ;</span><br><span class="line"><span class="keyword">select</span> hello(<span class="string">'Myth '</span>);</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">function</span> hello;</span><br><span class="line"><span class="comment">-- 函数</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">function</span> fun_test(var1 <span class="built_in">int</span>,var2 <span class="built_in">varchar</span>(<span class="number">16</span>)) <span class="keyword">returns</span> <span class="built_in">int</span></span><br><span class="line"><span class="keyword">begin</span> </span><br><span class="line">    <span class="keyword">declare</span> temp <span class="built_in">int</span>;</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">count</span>(*) <span class="keyword">into</span> temp <span class="keyword">from</span> <span class="keyword">test</span>;</span><br><span class="line">    return temp;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="keyword">select</span> fun_test(<span class="number">8</span>,<span class="string">'d'</span>);</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="1-mysql常用命令集合"><a href="#1-mysql常用命令集合" class="headerlink" title="1.mysql常用命令集合"></a>1.mysql常用命令集合</h1><h2 id="查看数据库参数"><a href="#查看数据库参数" class="headerlink" title="查看数据库参数"></a>查看数据库参数</h2><h3 id="查看连接状况"><a href="#查看连接状况" class="headerlink" title="查看连接状况"></a>查看连接状况</h3><blockquote>
<p><a href="https://blog.csdn.net/caodongfang126/article/details/52764213" target="_blank" rel="noopener">查看mysql数据库连接数、并发数相关信息。</a><code>show status like &#39;Threads%&#39;;</code></p>
</blockquote>
<h2 id="1-1【自增长】"><a href="#1-1【自增长】" class="headerlink" title="1.1【自增长】"></a>1.1【自增长】</h2><ul>
<li>【创建表时设置自增长，并设置起始值】<ul>
<li>create table cc( id int auto_increment,name varchar(20),primary key(id) ) auto_increment=1000;</li>
</ul>
</li>
<li>【设置已有字段自增长】 <ul>
<li>alter table test MODIFY id INT UNSIGNED AUTO_INCREMENT;</li>
</ul>
</li>
<li>【自增长的修改】 <ul>
<li>alter table test auto_increment=10； 注意只能改的比当前的值大，不可以改的比当前小</li>
</ul>
</li>
<li>【自增长字段溢出】<ul>
<li>设置自动增长的列，只能是int类型（包含了各种int），当出现了溢出就可以改成bigint 但是如果有外键约束，可能就会更改失败，还不如删库重建，实在太大了就删约束再建约束</li>
</ul>
</li>
</ul>
<h2 id="1-2【主键约束的修改】"><a href="#1-2【主键约束的修改】" class="headerlink" title="1.2【主键约束的修改】"></a>1.2【主键约束的修改】</h2><p>alter table 表名  add constraint (PK_表名) primary key (j,k,l); 关于一些约束条件constraint好像没有起到作用比如 check</p>
<h2 id="1-3【修改表名】"><a href="#1-3【修改表名】" class="headerlink" title="1.3【修改表名】"></a>1.3【修改表名】</h2><p>rename table table1 to table2;     切记不可随便修改表名，改了就要修改相应的 外键，触发器，函数，存储过程！！！</p>
<h2 id="1-4【定界符】"><a href="#1-4【定界符】" class="headerlink" title="1.4【定界符】"></a>1.4【定界符】</h2><p>delimiter 任意字符除了转义字符：\</p>
<h2 id="1-5【已有表数据，新建表】"><a href="#1-5【已有表数据，新建表】" class="headerlink" title="1.5【已有表数据，新建表】"></a>1.5【已有表数据，新建表】</h2><p>create table temp as select * from test;</p>
<h2 id="1-6【查看所有连接状态】"><a href="#1-6【查看所有连接状态】" class="headerlink" title="1.6【查看所有连接状态】"></a>1.6【查看所有连接状态】</h2><p>show processlist  如果是普通用户，只能查看自己当前的连接状态</p>
<h2 id="1-7【查看表的状态】"><a href="#1-7【查看表的状态】" class="headerlink" title="1.7【查看表的状态】"></a>1.7【查看表的状态】</h2><p>show table status like ‘assitant’ 可以看到当前自动增长的id当前值 dev.mysql.com/downloads/mysql/#downloads</p>
<hr>
<h2 id="1-8【关于时间-】"><a href="#1-8【关于时间-】" class="headerlink" title="1.8【关于时间 】"></a>1.8【关于时间 】</h2><h3 id="1-8-1【常用函数】"><a href="#1-8-1【常用函数】" class="headerlink" title="1.8.1【常用函数】"></a>1.8.1【常用函数】</h3><ul>
<li><strong>NOW()</strong>函数以 ‘YYYY-MM-DD HH:MM:SS’ 返回当前的日期时间，可以直接存到<strong>DATETIME</strong>字段中。</li>
<li><strong>CURDATE()</strong>以’YYYY-MM-DD’的格式返回今天的日期，可以直接存到<strong>DATE</strong>字段中。</li>
<li><strong>CURTIME()</strong>以’HH:MM:SS’的格式返回当前的时间，可以直接存到<strong>TIME</strong>字段中。<ul>
<li>例：insert into tablename (fieldname) values (now())</li>
<li>insert into data values (‘Myth’,’4’,’2016-03-10’,curtime());//年月日，时间</li>
<li>select datediff(curdate(), date_sub(curdate(), interval i month)); </li>
</ul>
</li>
<li>一般函数是不能作为 default默认值的，使用只能在插入修改数据时使用</li>
</ul>
<h3 id="1-8-2【获取当前时间与i个月之间的天数】"><a href="#1-8-2【获取当前时间与i个月之间的天数】" class="headerlink" title="1.8.2【获取当前时间与i个月之间的天数】"></a>1.8.2【获取当前时间与i个月之间的天数】</h3><ul>
<li>问题：假设当前是5月19 且（提前月份）i=1 就是计算从4月19到今天的天数<ul>
<li>解答：</li>
</ul>
</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 时间格式的简单操作：</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">DATE_FORMAT</span>(produceDate, <span class="string">'%Y'</span>) <span class="keyword">as</span> yeahr <span class="keyword">from</span> historybarcodesort</span><br><span class="line">   <span class="keyword">where</span> <span class="keyword">DATE_FORMAT</span>(produceDate, <span class="string">'%Y'</span>)=<span class="string">'2013'</span></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">date_format</span>(<span class="string">'1997-10-04 22:23:00'</span>,<span class="string">'%y %M %b %D %W %a %Y-%m-%d %H:%i:%s %r %T'</span>);</span><br><span class="line">    显示结果：97 October Oct 4th Saturday Sat 1997-10-04 22:23:00 10:23:00 PM 22:23:00</span><br><span class="line"><span class="comment">-- 查询指定时间：</span></span><br><span class="line">get_date = "2006-12-07"</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">count</span>(*) <span class="keyword">FROM</span> t_get_video_temp <span class="keyword">Where</span> <span class="keyword">DATE_FORMAT</span>(get_date, <span class="string">'%Y-%d'</span>)=<span class="string">'2006-07'</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">count</span>(*) <span class="keyword">FROM</span> t_get_video_temp <span class="keyword">Where</span> get_date <span class="keyword">like</span> <span class="string">'2006%-07%'</span>;</span><br></pre></td></tr></table></figure>
<h3 id="1-8-3-datetime和timestamp区别"><a href="#1-8-3-datetime和timestamp区别" class="headerlink" title="1.8.3 datetime和timestamp区别"></a>1.8.3 datetime和timestamp区别</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 问题：为什么 5.5的环境下运行两句命令得到不同的结果（5.6不会有错误）</span></span><br><span class="line"><span class="comment">-- 没错误</span></span><br><span class="line">creata table test1(one_time timestamp not null default current_timestamp,two_time timestamp);</span><br><span class="line"><span class="comment">-- 报错：Incorrect table definition; there can be only one TIMESTAMP column with CURRENT_TIMESTAMP in DEFAULT or ON UPDATE clause</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test2(one_time <span class="built_in">timestamp</span>,two_time <span class="built_in">timestamp</span> <span class="keyword">not</span> <span class="literal">null</span> <span class="keyword">default</span> <span class="keyword">current_timestamp</span>);</span><br><span class="line">或者 将timestamp 改成datetime 也不会有错，那么问题来了 区别是什么？</span><br><span class="line"><span class="comment">-- 上面报错原因不明，大意是只能有一个timestamp的列有默认值</span></span><br></pre></td></tr></table></figure>
<p><strong>DATETIME、DATE 和 TIMESTAMP 区别：</strong></p>
<ul>
<li><strong>DATETIME</strong> 类型可用于需要同时包含日期和时间信息的值。MySQL以’YYYY-MM-DD HH:MM:SS’ 格式检索与显示DATETIME类型。<ul>
<li>支持的范围是 ‘1000-01-01 00:00:00’ 到 ‘9999-12-31 23:59:59’。</li>
<li>(“支持”的含义是，尽管更早的值可能工作，但不能保证他们均可以。)</li>
</ul>
</li>
<li><strong>DATE</strong> 类型可用于需要一个日期值而不需要时间部分时。MySQL 以 ‘YYYY-MM-DD’ 格式检索与显示 DATE 值。<ul>
<li>支持的范围是 ‘1000-01-01’ 到 ‘9999-12-31’。</li>
</ul>
</li>
<li><strong>TIMESTAMP</strong> 列类型提供了一种类型，通过它你可以以当前操作的日期和时间自动地标记 Insert 或Update 操作。<ul>
<li>如果一张表中有多个 TIMESTAMP 列，只有第一个被自动更新。</li>
</ul>
</li>
</ul>
<blockquote>
<p>“完整”TIMESTAMP格式是14位，但TIMESTAMP列也可以用更短的显示尺寸创造<br>最常见的显示尺寸是6、8、12、和14。<br>你可以在创建表时指定一个任意的显示尺寸，但是定义列长为0或比14大均会被强制定义为列长14<br>列长在从1～13范围的奇数值尺寸均被强制为下一个更大的偶数。</p>
</blockquote>
<blockquote>
<p>列如：<br>定义字段长度 强制字段长度<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">TIMESTAMP(0) -&gt; TIMESTAMP(14)</span><br><span class="line">TIMESTAMP(15)-&gt; TIMESTAMP(14)</span><br><span class="line">TIMESTAMP(1) -&gt; TIMESTAMP(2)</span><br><span class="line">TIMESTAMP(5) -&gt; TIMESTAMP(6)</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>所有的TIMESTAMP列都有同样的存储大小，<br>使用被指定的时期时间值的完整精度（14位）存储合法的值不考虑显示尺寸。<br>不合法的日期，将会被强制为0存储</p>
</blockquote>
<p> <strong>自动更新第一个 TIMESTAMP 列在下列任何条件下发生：</strong></p>
<ul>
<li>列值没有明确地在一个 Insert 或 LOAD DATA INFILE 语句中被指定。</li>
<li>列值没有明确地在一个 Update 语句中被指定，并且其它的一些列值已发生改变。(注意，当一个 Update 设置一个列值为它原有值时，这将不会引起 TIMESTAMP 列的更新，因为，如果你设置一个列值为它当前值时，MySQL 为了效率为忽略更新。)</li>
<li>明确地以 NULL 设置 TIMESTAMP 列。</li>
<li>第一个列以外其它 TIMESTAMP 列，可以设置到当前的日期和时间，只要将该列赋值 NULL 或 NOW()。</li>
<li>任何 TIMESTAMP 列均可以被设置一个不同于当前操作日期与时间的值，这通过为该列明确指定一个你所期望的值来实现。这也适用于第一个 TIMESTAMP 列。这个选择性是很有用的，举例来说，当你希望 TIMESTAMP 列保存该记录行被新添加时的当前的日期和时间，但该值不再发生改变，无论以后是否对该记录行进行过更新：</li>
<li>当该记录行被建立时，让 MySQL 设置该列值。这将初始化该列为当前日期和时间。</li>
<li>以后当你对该记录行的其它列执行更新时，为 TIMESTAMP 列值明确地指定为它原来的值。</li>
<li>另一方面，你可能发现更容易的方法，使用 DATETIME 列，当新建记录行时以 NOW() 初始化该列，以后在对该记录行进行更新时不再处理它。</li>
</ul>
<h2 id="1-9-【插入外码】"><a href="#1-9-【插入外码】" class="headerlink" title="1.9 【插入外码】"></a>1.9 【插入外码】</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> <span class="string">`Bookinfo`</span> <span class="keyword">add</span> <span class="keyword">constraint</span> <span class="string">`F_N`</span> <span class="keyword">foreign</span> <span class="keyword">key</span> <span class="string">`F_N`</span>(<span class="string">`classno`</span>) <span class="keyword">references</span> <span class="string">`Bookclass`</span>(<span class="string">`classno`</span>) <span class="keyword">on</span> <span class="keyword">delete</span> <span class="keyword">cascade</span> <span class="keyword">on</span> <span class="keyword">update</span> <span class="keyword">cascade</span>;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="2-【变量】"><a href="#2-【变量】" class="headerlink" title="2.【变量】"></a>2.【变量】</h1><ul>
<li>加了@ 的是用户变量， 限定当前用户，当前客户端， 在declare中声明的参数可以不加 @，那就是是局部变量</li>
<li>例如：declare a int ;  也可以直接就用不用声明，作为临时变量 例如这两种写法：<ul>
<li>set @name =   expr;<ul>
<li>select @name:= expr;</li>
</ul>
</li>
</ul>
</li>
<li>注意：MySQL中只有基本数据类型，没有Oracle中那个绑定类型：表类型或行类型，所以处理起来有点。。不如Oracle方便，不管是触发器还是存储过程</li>
<li>set @a= select * from User；执行这句话就会报出 operand should contain 1 column(s)错误，就是说多值赋值的错误</li>
</ul>
<h1 id="3-【基本流程语法】"><a href="#3-【基本流程语法】" class="headerlink" title="3.【基本流程语法】"></a>3.【基本流程语法】</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if ... then </span><br><span class="line">elseif ... then (注意elseif中间没有空格)</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">if</span>;</span><br></pre></td></tr></table></figure>
<h1 id="7-【异常】"><a href="#7-【异常】" class="headerlink" title="7.【异常】"></a>7.【异常】</h1><h1 id="8-【用户管理】"><a href="#8-【用户管理】" class="headerlink" title="8.【用户管理】"></a>8.【用户管理】</h1><blockquote>
<p><a href="http://www.cnblogs.com/fslnet/p/3143344.html" target="_blank" rel="noopener">参考博客</a></p>
</blockquote>
<h2 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h2><ul>
<li>查询用户信息 <code>select host,user,password from user ;</code></li>
<li>查看权限 <code>show grants for zx_root;</code></li>
</ul>
<h2 id="创建-2"><a href="#创建-2" class="headerlink" title="创建"></a>创建</h2><blockquote>
<p>创建本地超级用户： CREATE USER ‘myth‘@’localhost’ IDENTIFIED BY ‘ad’;<br>授予所有权限 GRANT all privileges  ON <em>.</em> TO ‘myth‘@’localhost’;<br>创建远程访问指定数据库用户 ： CREATE USER ‘myth‘@’%’ IDENTIFIED BY ‘ad’;<br>授予数据库db的所有权限 GRANT all privileges  ON db.* TO ‘myth‘@’%’;</p>
</blockquote>
<ul>
<li>创建用户 <code>CREATE USER &#39;username&#39;@&#39;host&#39; IDENTIFIED BY &#39;password&#39;;</code></li>
<li>设置密码 <code>SET PASSWORD FOR &#39;username&#39;@&#39;%&#39; = PASSWORD(&quot;123456&quot;);</code><ul>
<li>修改密码也是这个语句注意的是要  <code>flush privileges;</code></li>
</ul>
</li>
<li>删除用户 <code>drop user &#39;username&#39;@&#39;host&#39;</code><ul>
<li>如果服务器需要远程访问 修改配置文件<code>/etc/mysql/mysql.conf.d/mysqld.cnf</code>，注释掉 bind_address 一行<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">%            匹配所有主机</span><br><span class="line">localhost    localhost不会被解析成IP地址，直接通过UNIXsocket连接</span><br><span class="line">127.0.0.1    会通过TCP/IP协议连接，并且只能在本机访问；</span><br><span class="line">::1          ::1就是兼容支持ipv6的，表示同ipv4的127.0.0.1</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="修改-1"><a href="#修改-1" class="headerlink" title="修改"></a>修改</h2><ul>
<li>修改名字：<code>rename user feng to newuser；</code></li>
</ul>
<h3 id="【授权】"><a href="#【授权】" class="headerlink" title="【授权】"></a>【授权】</h3><ol>
<li>grant all privileges  ON databasename.tablename TO ‘username‘@’host’ <ul>
<li>all privileges 所有权限</li>
<li>alter | alter routine</li>
<li>create | create routine | create temporary table | create user | create view</li>
<li>delete | drop</li>
<li>execute | file</li>
<li>index | insert</li>
<li>lock table | process | reload</li>
<li>replication | client | replication slave</li>
<li>select | show databases | show view</li>
<li>shutdown | super</li>
<li>update | usage</li>
</ul>
</li>
<li>回收权限 revoke, 用法和 grant 一样</li>
</ol>
<ul>
<li>刷新权限缓存 <code>flush privileges;</code></li>
</ul>
<h1 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h1><blockquote>
<p>数据库中最主要的还是查询， 多角度复杂的查询</p>
</blockquote>
<p><em>全自段模糊查询</em></p>
<ol>
<li><code>select * from target where concat(ifnull(host, &#39;&#39;), ifnull(username, &#39;&#39;)) like &#39;%localhost%&#39; &gt; 0 limit 0,1;</code><ul>
<li>将全字段(空的替换为空串)连接成一个字符再模糊查询, </li>
</ul>
</li>
<li><code>select * from target where host like &#39;%localhost%&#39; or username like &#39;%localhost%&#39; limit 0,1;</code><ul>
<li>这种查询虽然也能实现, 但是性能差一些</li>
</ul>
</li>
</ol>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2018-12-14T12:42:49.254Z" itemprop="dateUpdated">2018-12-14 20:42:49</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/2018/12/14/Memo-Database-MySQL/" target="_blank" rel="external">http://blog.kuangcp.top/2018/12/14/Memo-Database-MySQL/</a>
        
    </div>
    
    <footer>
        <a href="http://blog.kuangcp.top">
            <img src="/img/avatar.jpg" alt="Kuangcp">
            Kuangcp
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            

            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.kuangcp.top/2018/12/14/Memo-Database-MySQL/&title=《MySQL.md》 — Kuangcp Blog&pic=http://blog.kuangcp.top/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.kuangcp.top/2018/12/14/Memo-Database-MySQL/&title=《MySQL.md》 — Kuangcp Blog&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.kuangcp.top/2018/12/14/Memo-Database-MySQL/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《MySQL.md》 — Kuangcp Blog&url=http://blog.kuangcp.top/2018/12/14/Memo-Database-MySQL/&via=http://blog.kuangcp.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.kuangcp.top/2018/12/14/Memo-Database-MySQL/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/12/14/Memo-Java-AdvancedLearning-Java7/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Java7</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/12/14/Memo-Java-AdvancedLearning-Java11/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Java11</h4>
      </a>
    </div>
  
</nav>



    

















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/wechat.png" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style="display:none">
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style="display:none">
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Kuangcp &copy; 2015 - 2018</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.kuangcp.top/2018/12/14/Memo-Database-MySQL/&title=《MySQL.md》 — Kuangcp Blog&pic=http://blog.kuangcp.top/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.kuangcp.top/2018/12/14/Memo-Database-MySQL/&title=《MySQL.md》 — Kuangcp Blog&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.kuangcp.top/2018/12/14/Memo-Database-MySQL/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《MySQL.md》 — Kuangcp Blog&url=http://blog.kuangcp.top/2018/12/14/Memo-Database-MySQL/&via=http://blog.kuangcp.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.kuangcp.top/2018/12/14/Memo-Database-MySQL/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACLklEQVR42u3aQW7DMAwF0dz/0i7QVbqINJ90goYarQynsfVUgBFJPR54XL/j+Zrfeb5P3sL/Ph4yZMj4Wsa1HK8Y/Ho9xfUdMjcZMmScw+BBdj1dHkAJlX9XhgwZMtavTEfnvTJkyJCRJq5rUgqWIUOGjDWDT4WnoGl97EO5uAwZMr6QUWsMfOb67f0NGTJk/HtGJ/nkQZksTScxliFDxmxGur3rtAHSaJm2CmTIkHECgzcUyXQ7bYBiEJchQ8YBDB5S+QaRH/lKWwKb/oYMGTIGMdLSPw+OnaSX4//k4jJkyBjKuDdepcX9+JdBhgwZRzLINi4ozYcJ8F2hXIYMGecweHMxnWg/od0shAwZMkYzeIGMb9RqhX4eiDdFNxkyZIxjpMGRb+lqbcj02IcMGTJOYPCUlT+0Fpo5Y7MoMmTIGMeIC1vh4Yx+8S7eGsqQIWMco1OyT8tn/eXY/ADIkCFjKOOu4lqtxFZrdr78P8iQIWMog2/jitu1UgBNl0mGDBmzGamYhM70iAZpEsSVQhkyZIxj8DvrtLO2KeTHwjYBV4YMGUMZtaSx08hMnxnEVRkyZAxlXOFIp5IeMit+KkOGjNEMPt5RdOuX82TIkHEOg5fjyRrwTWTaltg8WYYMGQcweDmMHx2r1fCLCyRDhgwZIFlNG5Dp4bPNd2XIkCEjPGBaC5p80qgfK0OGjHEMfmy0dsyihudzkCFDxmzGDQkkTnR5EY0/TYYMGaMZPwbbf63Qlj9+AAAAAElFTkSuQmCC" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
