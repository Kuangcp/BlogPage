<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>LinuxNet.md | Kuangcp Blog | Javaer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="">
    <meta name="description" content="目录 start  【网络管理】 Tips 查看端口占用情况   DNS 修改DNS 刷新本地缓存   IPv4和IPv6 Bridge 基础命令工具 1.ping 2.curl 3.iproute2 4.tcpdump 5.netcat 6.scp 7.rsync 8.wget   【常用网络服务】 邮件服务器postfix和devecot FTP 基础 使用 手机和电脑之间传输管理文件 手机">
<meta property="og:type" content="article">
<meta property="og:title" content="LinuxNet.md">
<meta property="og:url" content="http://blog.kuangcp.top/2018/12/14/Memo-Linux-Base-LinuxNet/index.html">
<meta property="og:site_name" content="Kuangcp Blog">
<meta property="og:description" content="目录 start  【网络管理】 Tips 查看端口占用情况   DNS 修改DNS 刷新本地缓存   IPv4和IPv6 Bridge 基础命令工具 1.ping 2.curl 3.iproute2 4.tcpdump 5.netcat 6.scp 7.rsync 8.wget   【常用网络服务】 邮件服务器postfix和devecot FTP 基础 使用 手机和电脑之间传输管理文件 手机">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-12-14T12:42:49.250Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="LinuxNet.md">
<meta name="twitter:description" content="目录 start  【网络管理】 Tips 查看端口占用情况   DNS 修改DNS 刷新本地缓存   IPv4和IPv6 Bridge 基础命令工具 1.ping 2.curl 3.iproute2 4.tcpdump 5.netcat 6.scp 7.rsync 8.wget   【常用网络服务】 邮件服务器postfix和devecot FTP 基础 使用 手机和电脑之间传输管理文件 手机">
    
        <link rel="alternate" type="application/atom+xml" title="Kuangcp Blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Kuangcp</h5>
          <a href="mailto:kuangcp@aliyun.com" title="kuangcp@aliyun.com" class="mail">kuangcp@aliyun.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/">
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives">
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags">
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories">
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/kuangcp" target="_blank">
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">LinuxNet.md</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">LinuxNet.md</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-12-14T12:42:49.250Z" itemprop="datePublished" class="page-time">
  2018-12-14
</time>


            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#【网络管理】"><span class="post-toc-number">1.</span> <span class="post-toc-text">【网络管理】</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Tips"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">Tips</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#查看端口占用情况"><span class="post-toc-number">1.1.1.</span> <span class="post-toc-text">查看端口占用情况</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#DNS"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">DNS</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#修改DNS"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">修改DNS</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#刷新本地缓存"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">刷新本地缓存</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#IPv4和IPv6"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">IPv4和IPv6</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Bridge"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">Bridge</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#基础命令工具"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">基础命令工具</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-ping"><span class="post-toc-number">1.5.1.</span> <span class="post-toc-text">1.ping</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-curl"><span class="post-toc-number">1.5.2.</span> <span class="post-toc-text">2.curl</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-iproute2"><span class="post-toc-number">1.5.3.</span> <span class="post-toc-text">3.iproute2</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-tcpdump"><span class="post-toc-number">1.5.4.</span> <span class="post-toc-text">4.tcpdump</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-netcat"><span class="post-toc-number">1.5.5.</span> <span class="post-toc-text">5.netcat</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-scp"><span class="post-toc-number">1.5.6.</span> <span class="post-toc-text">6.scp</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#7-rsync"><span class="post-toc-number">1.5.7.</span> <span class="post-toc-text">7.rsync</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#8-wget"><span class="post-toc-number">1.5.8.</span> <span class="post-toc-text">8.wget</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#【常用网络服务】"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">【常用网络服务】</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#邮件服务器postfix和devecot"><span class="post-toc-number">1.6.1.</span> <span class="post-toc-text">邮件服务器postfix和devecot</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#FTP"><span class="post-toc-number">1.6.2.</span> <span class="post-toc-text">FTP</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#基础"><span class="post-toc-number">1.6.2.1.</span> <span class="post-toc-text">基础</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用"><span class="post-toc-number">1.6.2.2.</span> <span class="post-toc-text">使用</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#手机和电脑之间传输管理文件"><span class="post-toc-number">1.6.2.3.</span> <span class="post-toc-text">手机和电脑之间传输管理文件</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#手机"><span class="post-toc-number">1.6.2.3.1.</span> <span class="post-toc-text">手机</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#电脑"><span class="post-toc-number">1.6.2.3.2.</span> <span class="post-toc-text">电脑</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#配置FTP服务器"><span class="post-toc-number">1.6.2.4.</span> <span class="post-toc-text">配置FTP服务器</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Ssh"><span class="post-toc-number">1.6.3.</span> <span class="post-toc-text">Ssh</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#telnet"><span class="post-toc-number">1.6.4.</span> <span class="post-toc-text">telnet</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#VPN"><span class="post-toc-number">1.6.5.</span> <span class="post-toc-text">VPN</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#shadowsocks"><span class="post-toc-number">1.6.5.1.</span> <span class="post-toc-text">shadowsocks</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#防火墙"><span class="post-toc-number">1.6.6.</span> <span class="post-toc-text">防火墙</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#iptables"><span class="post-toc-number">1.6.6.1.</span> <span class="post-toc-text">iptables</span></a></li></ol></li></ol></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-Memo-Linux-Base-LinuxNet" class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">LinuxNet.md</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-12-14 20:42:49" datetime="2018-12-14T12:42:49.250Z" itemprop="datePublished">2018-12-14</time>

            


            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style="display:none">
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p><strong>目录 start</strong></p>
<ol>
<li><a href="#网络管理">【网络管理】</a><ol>
<li><a href="#tips">Tips</a><ol>
<li><a href="#查看端口占用情况">查看端口占用情况</a></li>
</ol>
</li>
<li><a href="#dns">DNS</a><ol>
<li><a href="#修改dns">修改DNS</a></li>
<li><a href="#刷新本地缓存">刷新本地缓存</a></li>
</ol>
</li>
<li><a href="#ipv4和ipv6">IPv4和IPv6</a></li>
<li><a href="#bridge">Bridge</a></li>
<li><a href="#基础命令工具">基础命令工具</a><ol>
<li><a href="#1ping">1.ping</a></li>
<li><a href="#2curl">2.curl</a></li>
<li><a href="#3iproute2">3.iproute2</a></li>
<li><a href="#4tcpdump">4.tcpdump</a></li>
<li><a href="#5netcat">5.netcat</a></li>
<li><a href="#6scp">6.scp</a></li>
<li><a href="#7rsync">7.rsync</a></li>
<li><a href="#8wget">8.wget</a></li>
</ol>
</li>
<li><a href="#常用网络服务">【常用网络服务】</a><ol>
<li><a href="#邮件服务器postfix和devecot">邮件服务器postfix和devecot</a></li>
<li><a href="#ftp">FTP</a><ol>
<li><a href="#基础">基础</a></li>
<li><a href="#使用">使用</a></li>
<li><a href="#手机和电脑之间传输管理文件">手机和电脑之间传输管理文件</a><ol>
<li><a href="#手机">手机</a></li>
<li><a href="#电脑">电脑</a></li>
</ol>
</li>
<li><a href="#配置ftp服务器">配置FTP服务器</a></li>
</ol>
</li>
<li><a href="#ssh">Ssh</a></li>
<li><a href="#telnet">telnet</a></li>
<li><a href="#vpn">VPN</a><ol>
<li><a href="#shadowsocks">shadowsocks</a></li>
</ol>
</li>
<li><a href="#防火墙">防火墙</a><ol>
<li><a href="#iptables">iptables</a></li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
<p><strong>目录 end</strong>|<em>2018-12-13 20:53</em>| <a href="https://gitee.com/gin9" target="_blank" rel="noopener">码云</a> | <a href="http://blog.csdn.net/kcp606" target="_blank" rel="noopener">CSDN</a> | <a href="https://my.oschina.net/kcp1104" target="_blank" rel="noopener">OSChina</a> | <a href="http://www.cnblogs.com/kuangcp" target="_blank" rel="noopener">cnblogs</a></p>
<hr>
<h1 id="【网络管理】"><a href="#【网络管理】" class="headerlink" title="【网络管理】"></a>【网络管理】</h1><h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><h3 id="查看端口占用情况"><a href="#查看端口占用情况" class="headerlink" title="查看端口占用情况"></a>查看端口占用情况</h3><blockquote>
<p>netstat lsof fuser ps 都有一定效果 <a href="./Linux/linux_performance.md"> linux_performance </a>  </p>
</blockquote>
<blockquote>
<p><a href="http://blog.csdn.net/ws379374000/article/details/74218530" target="_blank" rel="noopener">参考博客: linux下常用命令查看端口占用</a></p>
</blockquote>
<p><em>netstat工具</em> 或者 更好用的 <a href="#3iproute2">iproute2</a></p>
<ul>
<li><p><code>lsof -i:端口号</code> 用于查看某一端口的占用情况，缺省端口号显示全部</p>
<ul>
<li>或者 <code>cat /etc/services</code> 查看系统以及使用的端口</li>
</ul>
</li>
<li><p><code>netstat -tunlp | grep 端口号</code> 用于查看指定的端口号的进程情况</p>
<ul>
<li><code>-t</code> (tcp) 仅显示tcp相关选项</li>
<li><code>-u</code> (udp)仅显示udp相关选项</li>
<li><code>-n</code> 拒绝显示别名，能显示数字的全部转化为数字</li>
<li><code>-l</code> 仅列出在Listen(监听)的服务状态</li>
<li><code>-p</code> 显示建立相关链接的程序名</li>
</ul>
</li>
<li><p>查询端口占用的pid 三种：</p>
<ul>
<li><code>netstat -aonp |grep &quot;^[a-z]\+[ ]\+0[ ]\+0[ ]\+[0-9\.]\+:80[ ]\+&quot;|awk -F&quot; &quot;   {&#39;print $0&#39;}</code></li>
<li><code>netstat -aonp |grep &quot;:80[ ]\+&quot;|awk -F&quot; &quot;   {&#39;print $0&#39;}</code></li>
<li><code>sudo netstat -aonp |grep &quot;:6379[ ]\+&quot;|awk -F&quot; &quot;   {&#39;print $0&#39;}</code></li>
<li><code>sudo kill -9 pid</code> 杀掉指定pid</li>
<li><code>ps aux</code> 查看当前执行中的程序</li>
</ul>
</li>
<li><p>似乎能看到更多 <code>netstat -tpanl | grep 127.0.0.1</code> </p>
</li>
</ul>
<h2 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h2><ul>
<li>域名和资源转换的服务</li>
<li>解析域名的顺序一般是， 先在本机找，找不到去找上连DNS服务器， 然后根域DNS服务器<ul>
<li>这时候就有了几种方式，递归， 迭代， 递归加迭代（为了减轻全球13台根的压力）</li>
<li>假设是访问这个域名 scs.bupt.edu.cn （bupt.三级 机构域名， edu 二级行业域名， cn 一级国家域名）</li>
<li>递归： 本机-&gt;上连-&gt;根-&gt;cn-&gt;edu.cn-&gt;bupt.deu.cn 然后得到解析结果后，递归返回到上连，上连DNS服务器会进行缓存该结果，再返回本机</li>
<li>迭代：本机-&gt;上连，上连-&gt;根，根-&gt;cn cn-&gt;edu.cn, edu.cn-&gt;bupt.deu.cn 最终返回了结果 到上连</li>
<li>递归加迭代， 区别在于，先迭代根， 得到下级一级服务器节点后，下级就是递归的入口和出口</li>
</ul>
</li>
<li>授权和非授权， 还是上面那个URL， 其他的都不是授权的， 只有离URL最近的DNS才是授权的 即 <code>bupt.deu.cn</code> </li>
</ul>
<p><code>nslookup</code> 强大的调试DNS工具</p>
<ul>
<li>nslookup - 8.8.8.8 进入循环模式， 方便调试 8.8.8.8 是Google开放的DNS 备选 8.8.4.4<ul>
<li>结果解释：Non-authoritative answer: 表示这是从缓存得到的结果，不一定准确</li>
<li>Server：上连DNS服务器的IP， Address：<code>上连DNS的IP#端口</code> 通常是53</li>
<li>canonical name 即CNAME 别名<br><code>dig</code> 比nslookup更强大 Domain Information Groper</li>
</ul>
</li>
<li>例如：<code>dig +tcp @8.8.8.8 www.baidu.com</code> 采用TCP进行DNS通信（默认UDP）<ul>
<li>+short 精简输出</li>
<li>+nocmd+nocomment+nostat 输出最核心内容</li>
</ul>
</li>
</ul>
<p><code>drill</code></p>
<ul>
<li><strong>whois</strong><ul>
<li>查询域名详细信息<h3 id="修改DNS"><a href="#修改DNS" class="headerlink" title="修改DNS"></a>修改DNS</h3></li>
</ul>
</li>
<li><code>sudo vim /etc/resolv.conf</code> 添加Google的DNS <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nameserver 8.8.8.8 </span><br><span class="line">nameserver 8.8.8.4</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="刷新本地缓存"><a href="#刷新本地缓存" class="headerlink" title="刷新本地缓存"></a>刷新本地缓存</h3><blockquote>
<p><a href="https://linux.cn/article-3341-1.html" target="_blank" rel="noopener">参考博客</a></p>
</blockquote>
<hr>
<h2 id="IPv4和IPv6"><a href="#IPv4和IPv6" class="headerlink" title="IPv4和IPv6"></a>IPv4和IPv6</h2><ul>
<li>IPv4 只有32bit IPv6 有128bit</li>
</ul>
<p><code>IPv6</code></p>
<ul>
<li>零省略 ：如果有一位是 000C 可以直接写C</li>
<li>零压缩 ：如果FE04:0:0:0:0:0:0:DA 写成 FE::DA</li>
</ul>
<h2 id="Bridge"><a href="#Bridge" class="headerlink" title="Bridge"></a>Bridge</h2><blockquote>
<p>网桥, 通常使用 bridge-utils 的 brctl 进行管理</p>
</blockquote>
<ul>
<li style="list-style: none"><input type="checkbox"> Learn </li>
</ul>
<p><strong>增加</strong></p>
<p><strong>删除</strong></p>
<p><strong>配置开机启动</strong></p>
<hr>
<h2 id="基础命令工具"><a href="#基础命令工具" class="headerlink" title="基础命令工具"></a>基础命令工具</h2><blockquote>
<p>参考书籍 《Linux 大棚命令百篇》</p>
</blockquote>
<h3 id="1-ping"><a href="#1-ping" class="headerlink" title="1.ping"></a>1.ping</h3><blockquote>
<p>inetutils-ping</p>
</blockquote>
<ul>
<li>ping URL ： Linux是默认无休止的<ul>
<li>-c 次数</li>
<li>-q 安静模式 不输出</li>
<li>-s 默认64字节， 可以指定大小</li>
<li>-t 设定 TTL值，Linux默认是64或255 经过一个路由器就会减一</li>
<li>-i 每次ping的时间间隔 默认1s root用户才可以设置 0.2 以下</li>
<li>-f 暴力尽可能大量包的传送 至少每秒100个</li>
<li>注意：得到的结果中的 mdev 表示ICMP包的RTT偏离平均值的程度，mdev 越大表示网速不稳定 Linux有，mac下叫stddev win系列没有</li>
</ul>
</li>
</ul>
<blockquote>
<p><a href="http://denilson.sa.nom.br/prettyping/" target="_blank" rel="noopener">prettyping</a></p>
</blockquote>
<h3 id="2-curl"><a href="#2-curl" class="headerlink" title="2.curl"></a>2.curl</h3><ol>
<li>不输出，重定向到<em>黑洞设备</em>  <code>curl -s -o /dev/null URL</code></li>
<li>格式化返回的json数据：<code>curl xxxx|python -m json.tool</code></li>
<li>使用基础认证 发送JSON数据 <code>curl -i -H &quot;Content-Type:application/json&quot; -u admin:secret -X POST --data &#39;{&quot;title&quot;:&quot;1&quot;,&quot;content&quot;:&quot;1&quot;}&#39; http://tomcat.kcp/email/content</code></li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment"># 如果没有认证则会收到如下结果</span></span><br><span class="line">$ curl -i -u admin:secret -X POST http://tomcat.kcp/email/content</span><br><span class="line">    HTTP/1.1 401 </span><br><span class="line">    Server: nginx/1.13.3</span><br><span class="line">    Date: Thu, 26 Jul 2018 12:17:18 GMT</span><br><span class="line">    Content-Length: 0</span><br><span class="line">    Connection: keep-alive</span><br><span class="line">    Set-Cookie: JSESSIONID=D863FC575140E9B1A0A2505410617487; Path=/; HttpOnly</span><br><span class="line">    X-Content-Type-Options: nosniff</span><br><span class="line">    X-XSS-Protection: 1; mode=block</span><br><span class="line">    Cache-Control: no-cache, no-store, max-age=0, must-revalidate</span><br><span class="line">    Pragma: no-cache</span><br><span class="line">    Expires: 0</span><br><span class="line">    X-Frame-Options: DENY</span><br><span class="line">    WWW-Authenticate: Basic realm=<span class="string">"Realm"</span></span><br></pre></td></tr></table></figure>
<ul>
<li><a href="https://curl.haxx.se/docs/http-cookies.html" target="_blank" rel="noopener">curl cookie</a> | <a href="https://aiezu.com/article/linux_curl_http_cookie.html" target="_blank" rel="noopener">curl使用Cookie</a></li>
</ul>
<blockquote>
<p><a href="http://www.cnblogs.com/wainiwann/p/3492939.html" target="_blank" rel="noopener">参考博客: curl返回常见错误码</a></p>
<ul>
<li><a href="https://stackoverflow.com/questions/10285700/curl-error-recv-failure-connection-reset-by-peer-php-curl" target="_blank" rel="noopener">56错误码</a><br><a href="http://www.cnblogs.com/seasonzone/p/7527218.html" target="_blank" rel="noopener">参考博客: 使用cURL和用户名和密码？</a></li>
</ul>
</blockquote>
<h3 id="3-iproute2"><a href="#3-iproute2" class="headerlink" title="3.iproute2"></a>3.iproute2</h3><blockquote>
<p>代替 netstat 的强大工具</p>
</blockquote>
<p><code>替代方案</code></p>
<table>
<thead>
<tr>
<th style="text-align:center">用途</th>
<th style="text-align:center">net-tool</th>
<th style="text-align:center">iproute2</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">地址和链路配置</td>
<td style="text-align:center">ifconfig</td>
<td style="text-align:center">ip addr, ip link</td>
</tr>
<tr>
<td style="text-align:center">路由表</td>
<td style="text-align:center">route</td>
<td style="text-align:center">ip route</td>
</tr>
<tr>
<td style="text-align:center">ARP表</td>
<td style="text-align:center">arp</td>
<td style="text-align:center">ip neigh</td>
</tr>
<tr>
<td style="text-align:center">VLAN</td>
<td style="text-align:center">vconfig</td>
<td style="text-align:center">ip link</td>
</tr>
<tr>
<td style="text-align:center">隧道</td>
<td style="text-align:center">iptunnel</td>
<td style="text-align:center">ip tunnel</td>
</tr>
<tr>
<td style="text-align:center">组播</td>
<td style="text-align:center">ipmaddr</td>
<td style="text-align:center">ip maddr</td>
</tr>
<tr>
<td style="text-align:center">统计</td>
<td style="text-align:center">netstat</td>
<td style="text-align:center">ss</td>
</tr>
</tbody>
</table>
<p>_ss_</p>
<blockquote>
<p><a href="http://www.ttlsa.com/linux-command/ss-replace-netstat/" target="_blank" rel="noopener">参考博客: Linux网络状态工具ss命令使用详解</a></p>
</blockquote>
<ul>
<li>查看网络连接统计 <code>ss -s</code></li>
<li>查看打开的端口 <code>ss -l</code></li>
<li>查看打开的端口以及进程pid <code>ss -pl</code></li>
<li>查看所有socket连接 <code>ss -a</code></li>
<li>隧道术： 网络协议的数据包被封装在另一种网络协议的数据包之中 <code>这是VPN的技术理论基础</code><blockquote>
<p>别说的那么神乎其神, 用的时候, 连个Tomcat开的8080都查不到</p>
</blockquote>
</li>
</ul>
<p><code>net-tools 和 iproute 对应关系</code></p>
<table>
<thead>
<tr>
<th style="text-align:center">作用</th>
<th style="text-align:center">net-tools用法</th>
<th style="text-align:center">iproute2用法</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">展示本机所有网络接口</td>
<td style="text-align:center">ifconfig</td>
<td style="text-align:center">ip link [show]</td>
</tr>
<tr>
<td style="text-align:center">开启/停止某个网络接口</td>
<td style="text-align:center">ifconfig ech0 up/down</td>
<td style="text-align:center">ip link up/down eth0</td>
</tr>
<tr>
<td style="text-align:center">给网络接口设置/删除IP</td>
<td style="text-align:center">ipconfig eth0 10.0.0.0.1/24 / ifconfig eth0 0</td>
<td style="text-align:center">ip addr add/del 10.0.0.1/24 dev eth0</td>
</tr>
<tr>
<td style="text-align:center">显示某个网络接口的IP</td>
<td style="text-align:center">ifconfig eth0</td>
<td style="text-align:center">ip addr show dev eth0</td>
</tr>
<tr>
<td style="text-align:center">显示路由表</td>
<td style="text-align:center">route -n</td>
<td style="text-align:center">ip route show</td>
</tr>
<tr>
<td style="text-align:center">添加删除默认网关</td>
<td style="text-align:center">route add/del default gw 192.168.1.2 eth0</td>
<td style="text-align:center">ip route default via 192.168.1.2 eth0 / ip route replace default via 192.168.1.2 dev eth0</td>
</tr>
<tr>
<td style="text-align:center">添加ARP</td>
<td style="text-align:center">arp -s 192.168.1.100 00:0c:29:c5:5a:ed</td>
<td style="text-align:center">ip neigh add 192.168.1.100 lladdr 00:0c:29:c5:5a:ed dev eth0</td>
</tr>
<tr>
<td style="text-align:center">删除ARP</td>
<td style="text-align:center">arp -d 192.168.1.100</td>
<td style="text-align:center">ip neigh del 192.168.1.100 dev eth0</td>
</tr>
<tr>
<td style="text-align:center">展示套接字状态</td>
<td style="text-align:center">netstat -l</td>
<td style="text-align:center">ss -l</td>
</tr>
</tbody>
</table>
<ul>
<li>默认网关： 如果主机找不到准发规则， 就把数据包发给默认的网关</li>
<li>增加/删除一条路由规则 <code>ip route add/del 192.168.2.0/24 via 192.168.1.254</code></li>
</ul>
<h3 id="4-tcpdump"><a href="#4-tcpdump" class="headerlink" title="4.tcpdump"></a>4.tcpdump</h3><ul>
<li><p><code>tcpdump -i eth0 -nn -X &#39;port 53&#39; -c 1</code> root用户才有运行权限</p>
<ul>
<li>-i 指定监听的网络接口（网卡）</li>
<li>-nn 将协议号或端口号，显示数字，而不是名称例如：21 而不显示 FTP</li>
<li>-X 将协议头和包内容完整的显示出来</li>
<li>port 53 过滤，只显示53端口相关的包</li>
<li>-c 抓包的数量</li>
<li>-e 输出以太网帧头部信息输出 （能看到mac地址）</li>
<li>-l 输出变为行缓冲</li>
<li>-t 输出不打印时间戳</li>
<li>-v 输出更详细信息</li>
<li>-F 指定过滤表达式所在的文件</li>
<li>-w 将流量保存到文件中</li>
<li>-r 读取raw packets 文件</li>
</ul>
</li>
<li><p>列出可以选择的抓包对象 <code>tcpdump -D</code>（USB设备也能抓？）</p>
</li>
</ul>
<h3 id="5-netcat"><a href="#5-netcat" class="headerlink" title="5.netcat"></a>5.netcat</h3><blockquote>
<p>sudo apt install netcat  </p>
</blockquote>
<ul>
<li><p>开始监听端口 ： <code>nc -l 11044</code></p>
<ul>
<li>建立连接 <code>nc 127.0.0.1 11044</code> 任一方退出nc 就终止了连接</li>
</ul>
</li>
<li><p>端口扫描 <code>nc -z -v -n -w 2 127.0.0.1 20-33</code></p>
<ul>
<li>扫描22-33端口，</li>
<li>-z 一旦连接立马断开，不发送接收任何数据</li>
<li>-v 输出详细信息</li>
<li>-n 直接使用IP地址，不适用域名服务器来查询其域名</li>
<li>-w 设置连接超时时间 s</li>
<li>-u 使用UDP 默认缺省则是TCP</li>
</ul>
</li>
<li><p>连接开放的端口 <code>nc -v host port</code></p>
</li>
<li><p>传输文件 （相同的还有 ftp scp）</p>
<ul>
<li>服务端开启端口，准备好发送的文件 <code>nc -v -l 12345 &lt; temp_out.md</code></li>
<li>客户端接收文件：<code>nc -v -n host port &gt; temp_in.md</code></li>
<li>单次连接，传输完毕自动断开 服务端也可以是接收文件，将<code>&lt; &gt;</code>互换即可</li>
<li>没有进度提示,大文件也不支持</li>
</ul>
</li>
<li><p>传输文件夹 </p>
<ul>
<li>服务端 <code>tar -cvPf - /root/book/ | nc -l 12345</code></li>
<li>客户端 <code>nc -n host port | tar -xvPf -</code></li>
<li>这是未压缩的， 压缩再加上参数即可 例如 <code>gzip -czvPf -xzvPf</code></li>
</ul>
</li>
</ul>
<h3 id="6-scp"><a href="#6-scp" class="headerlink" title="6.scp"></a>6.scp</h3><blockquote>
<p>scp命令用于在Linux下进行远程拷贝文件的命令，和它类似的命令有cp，认证用的是ssh 所以也能使用sshpass</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-1：使用ssh协议版本1； </span><br><span class="line">-2：使用ssh协议版本2； </span><br><span class="line">-4：使用ipv4； </span><br><span class="line">-6：使用ipv6； </span><br><span class="line">-B：以批处理模式运行； </span><br><span class="line">-C：使用压缩； </span><br><span class="line">-F：指定ssh配置文件； </span><br><span class="line">-l：指定宽带限制； </span><br><span class="line">-o：指定使用的ssh选项； </span><br><span class="line">-i: 指定私钥文件</span><br><span class="line">-P：指定远程主机的端口号； </span><br><span class="line">-p：保留文件的最后修改时间，最后访问时间和权限模式； </span><br><span class="line">-q：不显示复制进度； </span><br><span class="line">-r：以递归方式复制。</span><br></pre></td></tr></table></figure>
<ul>
<li>远程到本地 <code>scp root@10.10.10.10:/opt/soft/nginx-0.5.38.tar.gz /opt/soft/</code></li>
<li>本地到远程 <code>scp /opt/soft/nginx-0.5.38.tar.gz root@10.10.10.10:/opt/soft/scptest</code></li>
</ul>
<blockquote>
<p>注: scp rcp wget rsync 几种传输文件的方式</p>
</blockquote>
<h3 id="7-rsync"><a href="#7-rsync" class="headerlink" title="7.rsync"></a>7.rsync</h3><blockquote>
<p>同步命令 (个人倾向于本地和远程， 书上称为源端和目的端) <a href="http://man.linuxde.net/rsync" target="_blank" rel="noopener">命令参数详解</a><br>| <a href="https://www.digitalocean.com/community/tutorials/how-to-use-rsync-to-sync-local-and-remote-directories-on-a-vps" target="_blank" rel="noopener">本地和VPS0之间同步数据</a></p>
</blockquote>
<ul>
<li><p>同步到 <code>rsync file user@host:path</code> 上， 是将这里的file文件覆盖远程的目录下的file文件，不像git那样</p>
<ul>
<li>同步当前目录 将file 换成 `ls`</li>
<li>-t 不加该参数：不会同步文件的修改时间，采用的<code>quick check策略</code>。使用后：让修改时间也同步，如果修改时间一致，就不同步（它不考虑文件内容，这是个坑）。</li>
<li>-I 就能解决上面的问题，每个文件都进行同步，代价是速度慢</li>
<li>-v 输出更多信息 v可以多个，v越多输出的日志信息也越多</li>
<li>-r 文件夹递归同步，这种是采用<code>上面的I策略</code>的</li>
<li>-l 同步软链接文件，默认是忽略该类文件的</li>
<li>-L 同步软链接文件及其目标文件</li>
<li>-z 压缩数据，提高传输速度</li>
<li>-p 缺省该参数时，如果远程没有该文件，权限会和本地的文件一致， 如果远程已经有该文件，权限和本地的不同， 那么命令不作更改。使用参数后，就会让权限尽力保持一致</li>
<li>-a 这个命令等价于 -rlptgoD 归档选项，采用递归方式，尽可能保持各方面的一致，但是不能同步硬链接，得加上 <code>-H</code></li>
</ul>
</li>
<li><p>只要文件不一样，就会触发同步，该命令确保远程的是和本地的一致，本地的直接覆盖远程的   </p>
</li>
<li>只要rsync命令对本地有读权限，对远程有写权限，就能确保目录是一致的</li>
<li>rsync只能以登录远程的账号来创建文件，它不可能将文件的组信息，用户信息也一致，除非是root用户可以做到</li>
</ul>
<p><code>【其他特别参数】</code></p>
<ul>
<li><code>--delete</code> 如果本地没有该文件 远程就会删掉<ul>
<li><code>--delete-exclude</code>删除远程指定的文件</li>
<li><code>--delete-after</code> 默认是先清理远程文件再同步，使用该选项就相反了先同步再删除需要删除文件</li>
</ul>
</li>
<li><code>--exclude</code> 排除掉某些文件不同步 可以使用多次<ul>
<li><code>--excule-from</code> 如果要排除的文件很多，可以将文件名放在一个文本文件里，然后使用该选项读取该文件</li>
</ul>
</li>
<li><code>--partial</code> 断点续传 可以简写-P</li>
<li><code>--progress</code> 显示传输进度信息</li>
</ul>
<h3 id="8-wget"><a href="#8-wget" class="headerlink" title="8.wget"></a>8.wget</h3><blockquote>
<p>特性和优势：支持 HTTP HTTPS FTP协议  </p>
<ul>
<li>能够跟踪 HTML 和 XHTML 即可以下载整站，但是注意wget会不停的去下载HTML中的外链，无休无止  </li>
<li>遵守 robots.txt 标准的工具  </li>
<li>支持慢速网路和不稳定的下载，当下载失败就会不断重试，直到下载成功  </li>
<li>支持断点续传  </li>
</ul>
</blockquote>
<ul>
<li><p>wget 配置文件 <code>/etc/wgetrc</code> <code>~/.wgetrc</code> 两个文件配置（区别是全局和当前用户）wget的默认行为</p>
</li>
<li><p>例如 -X配置：<code>wget  -X js,css URL</code> 排除两个文件夹不下载</p>
<ul>
<li>如果要默认排除，到<code>.wgetrc</code>文件里配置 <code>exclude_directories=js,css</code> </li>
<li>这时候就出了一个问题，你不知道配置文件的情况时，发现总有目录下载不下来，就可以排除两个文件的作用：</li>
<li><code>wget -X &#39;&#39; -X js,css URL</code></li>
<li>注意：<code>-X</code>，两个配置文件。这三者的配置，wget是取并集的， 使用了<code>-X &#39;&#39;</code> 后就只看后面的<code>-X 参数</code>   </li>
</ul>
</li>
<li><p>参数:</p>
<ul>
<li>目录下载 <code>-r</code> 递归选项</li>
<li>后台下载 <code>--background</code> 即使 你Ctrl D/exit也不会中断执行</li>
<li><code>-o</code> 指定日志输出。默认当前目录的 wget-log</li>
<li><code>-O</code> 将下载的所有文件的内容追加到指定的文件</li>
<li><code>-c</code> 断点续传 但是有潜在bug,当源站的文件头部分或者已下载部分修改了,wget是不知道的,只会继续下载之前没下载的内容</li>
<li><p>避开robots.txt 协议 <code>--execute robots=off</code></p>
<ul>
<li>尝试使用tomcat构建一个有robots协议的网站，然后wget还是绕过了协议。。。。。。</li>
<li>对github测试这个参数是正常的</li>
</ul>
</li>
<li><p>简化wget获取到的文件</p>
<ul>
<li>-nH 去除wget将域名作为文件夹的情况,只得到域名下相对路径的文件</li>
<li>–cut-dirs=number 去除前缀路径 </li>
<li>只用 <code>-r</code> : URL:a/b/c/</li>
<li><code>-r</code> 再用上 <code>--cut-dirs=1</code> : URL:/b/c/</li>
<li><code>-r</code> 再用上 <code>-nH</code> :a/b/c/</li>
<li><code>-r</code> 再用上 <code>-nH --cut-dirs=1</code> : /b/c/</li>
<li><code>-r</code> 再用上 <code>-nH --cut-dirs=2</code> : /c/</li>
</ul>
</li>
<li><p>平铺,不使用源站的目录结构: <code>-nd</code> 若有重名文件,自动重命名</p>
</li>
<li>强制处处文件夹 <code>-x</code> 例如:github.com/a/b/ –&gt; github/com/a/b/</li>
<li>协议命名的根文件夹 –protocol-directories 例如 <a href="ftp://baidu.com/a/b/" target="_blank" rel="noopener">ftp://baidu.com/a/b/</a></li>
<li>自动重试 <code>--tries=number</code> 设置下载失败后重试的次数    </li>
<li>拒绝重复下载同名文件,即使这个文件不是最新的 <code>-nc</code>, wget会先比较时间戳,然后下载,且多次下载同名文件会自动添加.1.2这样的后缀</li>
<li><p>自动分析是否下载同名文件, <code>-N</code> 会考虑时间戳以及文件大小,但是不能和 -nc 同时设置</p>
</li>
<li><p>限速 <code>--limit-rate=N</code> 默认单位是b,可以指定单位 k m , </p>
<ul>
<li>这个限速的实现原理是通过在进行一次网络读取后,就线程睡眠一会儿,将速度降下来,如果下载是超小文件就可能无法达到限速的效果  </li>
</ul>
</li>
<li>限制频率 -w 即 –wait=seconds 可以指定m h d 等单位,效果是每两个请求间隔指定时间</li>
<li>请求重试 <code>--waitretry</code> 设置请求重试的秒数, 如果设置的是10秒, 第一次失败后就会等1s,然后第二次失败就等2s…直到递增到10s,然后结束<ul>
<li>其效果 其实应该是 设置值的累加 (理解为重试次数似乎更好)</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p><a href="http://blog.csdn.net/adream307/article/details/47379149" target="_blank" rel="noopener">wget cookie</a><br><a href="http://blog.csdn.net/RichardYSteven/article/details/4565931" target="_blank" rel="noopener">参考博客: wget命令详解</a></p>
</blockquote>
<ul>
<li>镜像整站 <code>wget --mirror -p --convert-links -P . URL</code><ul>
<li>–miror: 镜像下载</li>
<li>-p: 下载所有为了html页面显示正常的文件</li>
<li>–convert-links: 下载后，转换成本地的链接</li>
<li><code>-P .</code>： 保存所有文件和目录 到当前目录</li>
</ul>
</li>
</ul>
<hr>
<h2 id="【常用网络服务】"><a href="#【常用网络服务】" class="headerlink" title="【常用网络服务】"></a>【常用网络服务】</h2><h3 id="邮件服务器postfix和devecot"><a href="#邮件服务器postfix和devecot" class="headerlink" title="邮件服务器postfix和devecot"></a>邮件服务器postfix和devecot</h3><h3 id="FTP"><a href="#FTP" class="headerlink" title="FTP"></a>FTP</h3><h4 id="基础"><a href="#基础" class="headerlink" title="基础"></a>基础</h4><h4 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h4><ul>
<li>登录<code>ftp host port</code></li>
</ul>
<h4 id="手机和电脑之间传输管理文件"><a href="#手机和电脑之间传输管理文件" class="headerlink" title="手机和电脑之间传输管理文件"></a>手机和电脑之间传输管理文件</h4><blockquote>
<p>前提是两个设备处于同一个局域网, 也就是说连同一个WIFI, 或者电脑开热点给手机连?</p>
</blockquote>
<h5 id="手机"><a href="#手机" class="headerlink" title="手机"></a>手机</h5><blockquote>
<p>手机安装 FeelFTP , 然后设置编码为utf-8, 开启服务器<br>或者安装ES文件浏览器, 也带有FTP服务器, 但是不稳定, 切出去就停了, 而且不能选择上SDK卡</p>
</blockquote>
<h5 id="电脑"><a href="#电脑" class="headerlink" title="电脑"></a>电脑</h5><blockquote>
<p>安装FileZila 建立连接, 然后就能方便的用鼠标进行传输了</p>
</blockquote>
<h4 id="配置FTP服务器"><a href="#配置FTP服务器" class="headerlink" title="配置FTP服务器"></a>配置FTP服务器</h4><ul>
<li><code>sudo apt-get install vsftpd -y</code></li>
<li><code>sudo systemctl start vsftpd.service</code></li>
<li>创建用户 <code>sudo useradd -d /home/uftp -s /bin/bash uftp</code></li>
<li>设置密码 <code>sudo passwd uftp</code></li>
<li>删除掉 pam.d 中 vsftpd，因为该配置文件会导致使用用户名登录 ftp 失败：<code>sudo rm /etc/pam.d/vsftpd</code></li>
<li>限制用户 uftp 只能通过 FTP 访问服务器，而不能直接登录服务器 <code>sudo usermod -s /sbin/nologin</code> uftp</li>
<li>修改配置文件 <code>sudo chmod a+w /etc/vsftpd.conf</code></li>
</ul>
<p><code>/etc/vsftpd.conf</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 限制用户对主目录以外目录访问</span><br><span class="line">chroot_local_user=YES</span><br><span class="line"># 指定一个 userlist 存放允许访问 ftp 的用户列表</span><br><span class="line">userlist_deny=NO</span><br><span class="line">userlist_enable=YES</span><br><span class="line"># 记录允许访问 ftp 用户列表</span><br><span class="line">userlist_file=/etc/vsftpd.user_list</span><br><span class="line"># 不配置可能导致莫名的530问题</span><br><span class="line">seccomp_sandbox=NO</span><br><span class="line"># 允许文件上传</span><br><span class="line">write_enable=YES</span><br><span class="line"># 使用utf8编码</span><br><span class="line">utf8_filesystem=YES</span><br></pre></td></tr></table></figure></p>
<ul>
<li>新建文件 sudo touch /etc/vsftpd.user_list</li>
<li>修改权限 <code>sudo chmod a+w /etc/vsftpd.user_list</code></li>
<li>添加用户名 <code>uftp</code></li>
<li>设置用户目录只读 <code>sudo chmod a-w /home/common</code></li>
<li>新建公共目录 设置权限 <code>mkdir /home/common/public &amp;&amp; sudo chmod 777 -R /home/common/public</code></li>
<li>重启服务 <code>sudo systemctl restart vsftpd.service</code></li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">~$ sudo mkdir /home/common</span><br><span class="line">~$ sudo touch /home/common/welcome.txt</span><br><span class="line">~$ sudo useradd -d /home/common -s /bin/bash common</span><br><span class="line">~$ sudo passwd common</span><br><span class="line">~$ sudo rm /etc/pam.d/vsftpd</span><br><span class="line">~$ sudo usermod -s /sbin/nologin common</span><br><span class="line">~$ sudo chmod a+w /etc/vsftpd.conf</span><br><span class="line">~$ sudo vim /etc/vsftpd.conf</span><br><span class="line">~$ sudo vim /etc/vsftpd.user_list</span><br><span class="line">~$ sudo chmod a-w /home/common</span><br><span class="line">~$ sudo mkdir /home/common/public &amp;&amp; sudo chmod 777 -R /home/common/public</span><br><span class="line">~$ sudo systemctl restart vsftpd.service</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="Ssh"><a href="#Ssh" class="headerlink" title="Ssh"></a>Ssh</h3><blockquote>
<p><a href="/Linux/Base/Ssh.md">详细</a></p>
</blockquote>
<h3 id="telnet"><a href="#telnet" class="headerlink" title="telnet"></a>telnet</h3><blockquote>
<p><a href="http://www.linuxso.com/command/telnet.html" target="_blank" rel="noopener">linux telnet命令参数</a><br><a href="http://www.cnblogs.com/peida/archive/2013/03/13/2956992.html" target="_blank" rel="noopener">每天一个linux命令（58）：telnet命令</a></p>
</blockquote>
<hr>
<h3 id="VPN"><a href="#VPN" class="headerlink" title="VPN"></a>VPN</h3><h4 id="shadowsocks"><a href="#shadowsocks" class="headerlink" title="shadowsocks"></a>shadowsocks</h4><p><em>服务端</em></p>
<ul>
<li>安装服务端<code>sudo pip install shadowsocks</code></li>
<li>启动服务<code>sudo ssserver -p 443 -k sd -m aes-256-cfb</code>     </li>
<li>后台运行<code>sudo ssserver -p 443 -k sd -m aes-256-cfb --user nobodu -d start</code></li>
<li>停止 <code>sudo ssserver -d stop</code></li>
<li>日志 <code>sudo less /var/log/shadowsocks.log</code></li>
</ul>
<p><em>客户端</em></p>
<ul>
<li><p><code>sudo vim /etc/ss.json</code> </p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line"> <span class="attr">"server"</span>:<span class="string">"127.0.0.1"</span>,</span><br><span class="line"> <span class="attr">"server_port"</span>:<span class="number">443</span>,</span><br><span class="line"> <span class="attr">"localport"</span>:<span class="number">1080</span>,</span><br><span class="line"> <span class="attr">"password"</span>:<span class="string">"password"</span>,</span><br><span class="line"> <span class="attr">"timeout"</span>:<span class="number">600</span>,</span><br><span class="line"> <span class="attr">"method"</span>:<span class="string">"aes-256-cfb"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>sslocal -c /etc/ss/json</code></p>
</li>
<li>设置代理是1080端口即可</li>
</ul>
<h3 id="防火墙"><a href="#防火墙" class="headerlink" title="防火墙"></a>防火墙</h3><h4 id="iptables"><a href="#iptables" class="headerlink" title="iptables"></a>iptables</h4><blockquote>
<p><a href="http://www.cnblogs.com/JemBai/archive/2009/03/19/1416364.html" target="_blank" rel="noopener">参考博客: linux下IPTABLES配置详解</a></p>
</blockquote>
<blockquote>
<p>其主要配置文件为: <code>/etc/sysconfig/iptables</code></p>
</blockquote>
<ul>
<li><p>查看配置情况 <code>iptables -L -n</code></p>
</li>
<li><p>开启端口 <code>iptables -A INPUT -p tcp --dport 8000 -j ACCEPT</code></p>
<ul>
<li>-A 参数表示添加规则，此外-D表示删除规则</li>
<li>-p 表示协议，一般都是tcp</li>
<li>–dport 就是指定端口号</li>
<li>-j 指定是ACCEPT还是DROP，接收还是抛弃</li>
</ul>
</li>
</ul>
<p><em>有时候会发生这样的事情</em></p>
<ol>
<li>服务器的服务是正常启动的, 但是客户端连不上, 然后使用curl 去访问那个端口, 报错说 curl: (7) Failed to connect to 192.168.10.201 port 16888: 没有到主机的路由</li>
<li>那么这时候就要检查防火墙了</li>
</ol>

        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2018-12-14T12:42:49.250Z" itemprop="dateUpdated">2018-12-14 20:42:49</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/2018/12/14/Memo-Linux-Base-LinuxNet/" target="_blank" rel="external">http://blog.kuangcp.top/2018/12/14/Memo-Linux-Base-LinuxNet/</a>
        
    </div>
    
    <footer>
        <a href="http://blog.kuangcp.top">
            <img src="/img/avatar.jpg" alt="Kuangcp">
            Kuangcp
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            

            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.kuangcp.top/2018/12/14/Memo-Linux-Base-LinuxNet/&title=《LinuxNet.md》 — Kuangcp Blog&pic=http://blog.kuangcp.top/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.kuangcp.top/2018/12/14/Memo-Linux-Base-LinuxNet/&title=《LinuxNet.md》 — Kuangcp Blog&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.kuangcp.top/2018/12/14/Memo-Linux-Base-LinuxNet/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《LinuxNet.md》 — Kuangcp Blog&url=http://blog.kuangcp.top/2018/12/14/Memo-Linux-Base-LinuxNet/&via=http://blog.kuangcp.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.kuangcp.top/2018/12/14/Memo-Linux-Base-LinuxNet/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/12/14/Memo-Groovy-GroovySpring/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">GroovySpring.md</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/12/14/Memo-FrontEnd-ViewSolution/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">ViewSolution.md</h4>
      </a>
    </div>
  
</nav>



    

















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/wechat.png" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style="display:none">
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style="display:none">
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Kuangcp &copy; 2015 - 2018</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.kuangcp.top/2018/12/14/Memo-Linux-Base-LinuxNet/&title=《LinuxNet.md》 — Kuangcp Blog&pic=http://blog.kuangcp.top/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.kuangcp.top/2018/12/14/Memo-Linux-Base-LinuxNet/&title=《LinuxNet.md》 — Kuangcp Blog&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.kuangcp.top/2018/12/14/Memo-Linux-Base-LinuxNet/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《LinuxNet.md》 — Kuangcp Blog&url=http://blog.kuangcp.top/2018/12/14/Memo-Linux-Base-LinuxNet/&via=http://blog.kuangcp.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.kuangcp.top/2018/12/14/Memo-Linux-Base-LinuxNet/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACKUlEQVR42u3ay46CAAwFUP//p51kto5426IZy2FlAgiHRdPX7RYf99/j8ffx9cdXPp5N7hodGBgYX8u4Hx7PGPnZ47ueXZm/GwYGxnUYSZDNH5kE0Jya3IuBgYFxfE0CyMM6BgYGxrkBt5rS5WcxMDAwekVs8rAXpWaLcXItjoGB8YWMyWDg3b8/NN/AwMD4x4x78chDbf7EE94KAwNjNeO4QV9twM0XLCYNOAwMjCswquVidXjZW78olKwYGBirGcew3mJEr+lfHZpiYGBcgTFKxYrtuTyYJryntTgGBsZqRjUdnA8mz2rGYWBg7GYkmWM1BOcJZbXFFr0JBgbGUsZ8Law32py0516UshgYGIsYeRqXN796TbS8hffHlRgYGKsZk787Tt2qj8xbbxgYGNdk9NpkSWssTz3zBbWo0YaBgbGOUW2W5YVovnaWF7oRBgMDYxEjHwP0krby2kRvWQ0DA+MCjHzO2buyujRWTiIxMDBWMybrp+8Itb1hKgYGxm5GNcDNw3E1ESxU3hgYGKsZvVA7L1CTsWjUEMTAwFjNSJrvvTFAb7aYh+DCX2NgYHw5ozdcTIrP6lBzdBYDA2M146yYnSPzIegkfcTAwNjHyIPsJ9PH/B0wMDCuw5i3w05bkugVwBgYGBjx0DFZnqiWuNHnwMDAwBgsiuWfpjoufTrCxMDAWMqYBMdq3KuWstHnw8DAWM3oFZBnNenysN5bhMXAwPhyxg9z+zf1FTefDAAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
