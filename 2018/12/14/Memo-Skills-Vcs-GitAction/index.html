<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>Git实践 | Kuangcp Blog | Javaer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="">
    <meta name="description" content="目录 start  GitInAction Tips 配置记住密码 【安装】 Linux(debian系) windows GUI   【简单使用】 配置GPG 实验楼上使用Github 码云   【git初始化配置】 【VI编辑器的使用】   【配置SSH连接上Github】 Github上fork别人项目的操作 Github上PR .gitingnore文件 终端中显示当前分支 命令的自动补全">
<meta property="og:type" content="article">
<meta property="og:title" content="Git实践">
<meta property="og:url" content="http://blog.kuangcp.top/2018/12/14/Memo-Skills-Vcs-GitAction/index.html">
<meta property="og:site_name" content="Kuangcp Blog">
<meta property="og:description" content="目录 start  GitInAction Tips 配置记住密码 【安装】 Linux(debian系) windows GUI   【简单使用】 配置GPG 实验楼上使用Github 码云   【git初始化配置】 【VI编辑器的使用】   【配置SSH连接上Github】 Github上fork别人项目的操作 Github上PR .gitingnore文件 终端中显示当前分支 命令的自动补全">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-12-14T12:42:49.250Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Git实践">
<meta name="twitter:description" content="目录 start  GitInAction Tips 配置记住密码 【安装】 Linux(debian系) windows GUI   【简单使用】 配置GPG 实验楼上使用Github 码云   【git初始化配置】 【VI编辑器的使用】   【配置SSH连接上Github】 Github上fork别人项目的操作 Github上PR .gitingnore文件 终端中显示当前分支 命令的自动补全">
    
        <link rel="alternate" type="application/atom+xml" title="Kuangcp Blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">Kuangcp</h5>
          <a href="mailto:kuangcp@aliyun.com" title="kuangcp@aliyun.com" class="mail">kuangcp@aliyun.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/">
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives">
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags">
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories">
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/kuangcp" target="_blank">
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Git实践</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Git实践</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-12-14T12:42:49.250Z" itemprop="datePublished" class="page-time">
  2018-12-14
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Git/">Git</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#GitInAction"><span class="post-toc-number">1.</span> <span class="post-toc-text">GitInAction</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Tips"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">Tips</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#配置记住密码"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">配置记住密码</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#【安装】"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">【安装】</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Linux-debian系"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">Linux(debian系)</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#windows"><span class="post-toc-number">1.3.2.</span> <span class="post-toc-text">windows</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#GUI"><span class="post-toc-number">1.3.3.</span> <span class="post-toc-text">GUI</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#【简单使用】"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">【简单使用】</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#配置GPG"><span class="post-toc-number">1.4.1.</span> <span class="post-toc-text">配置GPG</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实验楼上使用Github"><span class="post-toc-number">1.4.2.</span> <span class="post-toc-text">实验楼上使用Github</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#码云"><span class="post-toc-number">1.4.3.</span> <span class="post-toc-text">码云</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#【git初始化配置】"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">【git初始化配置】</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#【VI编辑器的使用】"><span class="post-toc-number">1.5.1.</span> <span class="post-toc-text">【VI编辑器的使用】</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#【配置SSH连接上Github】"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">【配置SSH连接上Github】</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Github上fork别人项目的操作"><span class="post-toc-number">1.6.1.</span> <span class="post-toc-text">Github上fork别人项目的操作</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Github上PR"><span class="post-toc-number">1.6.2.</span> <span class="post-toc-text">Github上PR</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#gitingnore文件"><span class="post-toc-number">1.6.3.</span> <span class="post-toc-text">.gitingnore文件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#终端中显示当前分支"><span class="post-toc-number">1.6.4.</span> <span class="post-toc-text">终端中显示当前分支</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#命令的自动补全"><span class="post-toc-number">1.6.5.</span> <span class="post-toc-text">命令的自动补全</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#搭建Git服务器"><span class="post-toc-number">1.7.</span> <span class="post-toc-text">搭建Git服务器</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用git-daemon搭建简易-Server"><span class="post-toc-number">1.7.1.</span> <span class="post-toc-text">使用git daemon搭建简易 Server</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#【HTTP访问Git服务器】"><span class="post-toc-number">1.7.2.</span> <span class="post-toc-text">【HTTP访问Git服务器】</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#【配置HTTPS】"><span class="post-toc-number">1.7.2.1.</span> <span class="post-toc-text">【配置HTTPS】</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#【使用SSH登录GitServer】"><span class="post-toc-number">1.7.2.2.</span> <span class="post-toc-text">【使用SSH登录GitServer】</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#基础命令概述"><span class="post-toc-number">1.8.</span> <span class="post-toc-text">基础命令概述</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#reset使用方式"><span class="post-toc-number">1.9.</span> <span class="post-toc-text">reset使用方式</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#1-回滚add操作"><span class="post-toc-number">1.9.1.</span> <span class="post-toc-text">1.回滚add操作</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#2-回滚最近一次commit"><span class="post-toc-number">1.9.2.</span> <span class="post-toc-text">2.回滚最近一次commit</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#3-回滚最近几次的commit并添加到一个新建的分支上去"><span class="post-toc-number">1.9.3.</span> <span class="post-toc-text">3.回滚最近几次的commit并添加到一个新建的分支上去</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#4-永久删除最近几次"><span class="post-toc-number">1.9.4.</span> <span class="post-toc-text">4.永久删除最近几次</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#5-回滚merge和pull操作"><span class="post-toc-number">1.9.5.</span> <span class="post-toc-text">5.回滚merge和pull操作</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#6-在被污染的working-tree中回滚merge或者pull"><span class="post-toc-number">1.9.6.</span> <span class="post-toc-text">6.在被污染的working_tree中回滚merge或者pull</span></a></li></ol></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-Memo-Skills-Vcs-GitAction" class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Git实践</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-12-14 20:42:49" datetime="2018-12-14T12:42:49.250Z" itemprop="datePublished">2018-12-14</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Git/">Git</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style="display:none">
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <p><strong>目录 start</strong></p>
<ol>
<li><a href="#gitinaction">GitInAction</a><ol>
<li><a href="#tips">Tips</a></li>
<li><a href="#配置记住密码">配置记住密码</a></li>
<li><a href="#安装">【安装】</a><ol>
<li><a href="#linuxdebian系">Linux(debian系)</a></li>
<li><a href="#windows">windows</a></li>
<li><a href="#gui">GUI</a></li>
</ol>
</li>
<li><a href="#简单使用">【简单使用】</a><ol>
<li><a href="#配置gpg">配置GPG</a></li>
<li><a href="#实验楼上使用github">实验楼上使用Github</a></li>
<li><a href="#码云">码云</a></li>
</ol>
</li>
<li><a href="#git初始化配置">【git初始化配置】</a><ol>
<li><a href="#vi编辑器的使用">【VI编辑器的使用】</a></li>
</ol>
</li>
<li><a href="#配置ssh连接上github">【配置SSH连接上Github】</a><ol>
<li><a href="#github上fork别人项目的操作">Github上fork别人项目的操作</a></li>
<li><a href="#github上pr">Github上PR</a></li>
<li><a href="#gitingnore文件">.gitingnore文件</a></li>
<li><a href="#终端中显示当前分支">终端中显示当前分支</a></li>
<li><a href="#命令的自动补全">命令的自动补全</a></li>
</ol>
</li>
<li><a href="#搭建git服务器">搭建Git服务器</a><ol>
<li><a href="#使用git-daemon搭建简易-server">使用git daemon搭建简易 Server</a></li>
<li><a href="#http访问git服务器">【HTTP访问Git服务器】</a><ol>
<li><a href="#配置https">【配置HTTPS】</a></li>
<li><a href="#使用ssh登录gitserver">【使用SSH登录GitServer】</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#基础命令概述">基础命令概述</a></li>
<li><a href="#reset使用方式">reset使用方式</a><ol>
<li><a href="#1回滚add操作">1.回滚add操作</a></li>
<li><a href="#2回滚最近一次commit">2.回滚最近一次commit</a></li>
<li><a href="#3回滚最近几次的commit并添加到一个新建的分支上去">3.回滚最近几次的commit并添加到一个新建的分支上去</a></li>
<li><a href="#4永久删除最近几次">4.永久删除最近几次</a></li>
<li><a href="#5回滚merge和pull操作">5.回滚merge和pull操作</a></li>
<li><a href="#6在被污染的working_tree中回滚merge或者pull">6.在被污染的working_tree中回滚merge或者pull</a></li>
<li><a href="#7被中断的工作流程">7.被中断的工作流程</a></li>
<li><a href="#8reset一个单独的文件">8.Reset一个单独的文件</a></li>
<li><a href="#9保留working_tree并且丢弃一些commit">9.保留working_tree并且丢弃一些commit</a></li>
</ol>
</li>
</ol>
</li>
</ol>
<p><strong>目录 end</strong>|<em>2018-12-14 20:38</em>| <a href="https://gitee.com/gin9" target="_blank" rel="noopener">码云</a> | <a href="http://blog.csdn.net/kcp606" target="_blank" rel="noopener">CSDN</a> | <a href="https://my.oschina.net/kcp1104" target="_blank" rel="noopener">OSChina</a> | <a href="http://www.cnblogs.com/kuangcp" target="_blank" rel="noopener">cnblogs</a></p>
<hr>
<h1 id="GitInAction"><a href="#GitInAction" class="headerlink" title="GitInAction"></a>GitInAction</h1><blockquote>
<p><a href="https://try.github.io/" target="_blank" rel="noopener">try git</a></p>
</blockquote>
<blockquote>
<p><a href="https://github.com/jesseduffield/lazygit" target="_blank" rel="noopener">Github: lazygit</a><code>命令行的简易图形化</code></p>
</blockquote>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ol>
<li>虽然在物理上本地仓库中所有文件是放在一起的，但是分支之间是互不能访问以及操作的</li>
<li>在本地的每次commit都是有index的，上传到github可以不用那么频繁，反正都是有记录的</li>
<li><p>出现了冲突，从而无法自动merge：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git pull 对方的分支</span><br><span class="line">git checkout 自己的分支</span><br><span class="line">git merge --no-ff 对方的分支</span><br><span class="line">git push （自己的源+分支）origin master</span><br></pre></td></tr></table></figure>
</li>
<li><p>切记：避免隐私的配置文件上传github时，将配置分离出来配置.gitignore中忽略掉配置文件，然后建立模板文件夹放待配置的文件即可</p>
<ul>
<li><code>大意的后果</code>：<a href="https://zhuanlan.zhihu.com/p/33424997" target="_blank" rel="noopener">程序员复仇记 | 这些年，GitHub 上泄露了些什么？</a></li>
<li><a href="https://www.bennythink.com/git-password.html" target="_blank" rel="noopener">不小心把密码上传到 GitHub 了，怎么办</a></li>
</ul>
</li>
<li><code>cat ~/.ssh/id_rsa.pub | xclip -sel clip</code> 复制公钥</li>
<li>Linux下当大量文件出现mode的变化（因为你的目录移动，文件权限变化等影响的）可以设置忽略掉 <code>git config core.fileMode false</code><ul>
<li>当将目录备份出去，然后重装系统粘贴回来，权限就变了，mode也变了，可以设置忽略掉改变</li>
</ul>
</li>
<li>git的输出中文乱码 执行 <code>git config --global core.quotepath false</code>即可</li>
</ol>
<h2 id="配置记住密码"><a href="#配置记住密码" class="headerlink" title="配置记住密码"></a>配置记住密码</h2><ul>
<li><p><code>Windows下记住密码</code> ： </p>
<ul>
<li>新建环境变量 HOME 值：<code>%USERPROFILE%</code></li>
<li>在C盘User下你的当前用户目录下新建<code>_netrc</code>文本文件： <ul>
<li><code>machine https://github.com/Kuangcp/</code></li>
<li><code>login ***</code></li>
<li><code>password ***</code> </li>
</ul>
</li>
<li>成功配置，测试便知</li>
</ul>
</li>
<li><p><code>Linux下记住密码</code>：(如果使用了多个github账号，设置这个后只能使用一个账号的自动登录，另一个账号将完全连不上github，ssh也只能一个账号配一个，不能多个账号用一个ssh)</p>
<ul>
<li><code>touch .git-credentials</code></li>
<li><code>vim .git-credentials</code></li>
<li>输入： <code>http://{username}:{password}@github.com</code> 或者是https开头</li>
<li><code>git config --global credential.helper store</code></li>
<li><code>~/.gitconfig</code> 文件中多了以下内容即可<ul>
<li>[credential]</li>
<li>helper = store</li>
</ul>
</li>
</ul>
</li>
<li><p><code>ssh 方法：（推荐）</code></p>
<ul>
<li><code>ssh-keygen</code> 不设置密码</li>
<li><code>cat ~/.ssh/id_rsa.pub | xclip -sel clip</code>  添加即可</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li>关于许可证 <a href="https://choosealicense.com/licenses/" target="_blank" rel="noopener">Github许可证网</a><ul>
<li>新建项目的时候可以选择 添加.gitignore和许可证类别 许可证大致分为 MIT Apache2.0 GPL </li>
<li><code>MIT</code> 简单宽松的许可证，任何人可以拿代码做任何事与我无关<code>eg: jQuery、Rails</code> </li>
<li><code>Apache</code> 关注于专利，这类似于MIT许可证，但它同时还包含了贡献者向用户提供专利授权相关的条款。 <code>Apache、SVN和NuGet</code></li>
<li><code>GPL</code> 关注于共享改进，这是一种copyleft许可证，要求修改项目代码的用户再次分发源码或二进制代码时，必须公布他的相关修改。 <code>Linux、Git</code></li>
</ul>
</li>
</ul>
<hr>
<h2 id="【安装】"><a href="#【安装】" class="headerlink" title="【安装】"></a>【安装】</h2><h3 id="Linux-debian系"><a href="#Linux-debian系" class="headerlink" title="Linux(debian系)"></a>Linux(debian系)</h3><ul>
<li><code>sudo apt-get install git</code></li>
</ul>
<p><code>安装最新版本Git</code></p>
<ul>
<li><code>sudo add-apt-repository ppa:git-core/ppa</code> <ul>
<li>如果命令找不到就先安装这个 <code>sudo apt-get install software-properties-common</code></li>
</ul>
</li>
<li><code>sudo apt update</code></li>
<li><p><code>sudo apt install git</code></p>
</li>
<li><p>从源码安装 <a href="https://github.com/git/git" target="_blank" rel="noopener">Github:git</a></p>
<ul>
<li>make prefix=/usr/local all </li>
<li>sudo makeprefix=/usr/local install </li>
</ul>
</li>
<li><p>安装文档(可选):</p>
<ul>
<li>sudo apt-get installasciidoc</li>
<li>make prefix=/usr/local docinfo</li>
<li>sudo makeprefix=/usr/local install</li>
</ul>
</li>
<li><p>卸载</p>
<ul>
<li>sudo find /usr/local -depth -iname ‘git*’ -exec rm -fr {} \;</li>
</ul>
</li>
</ul>
<h3 id="windows"><a href="#windows" class="headerlink" title="windows"></a>windows</h3><ul>
<li>直接搜索git-for-windows 建议使用360搜索,会有360的下载链接,无意间发现 毕竟官网的下载速度不敢恭维</li>
</ul>
<h3 id="GUI"><a href="#GUI" class="headerlink" title="GUI"></a>GUI</h3><blockquote>
<p><a href="https://git-scm.com/downloads/guis" target="_blank" rel="noopener">官方列表</a></p>
</blockquote>
<hr>
<h2 id="【简单使用】"><a href="#【简单使用】" class="headerlink" title="【简单使用】"></a>【简单使用】</h2><p><em>Github下拉到eclipse</em></p>
<ul>
<li>1.在GitHub上新建一个项目，不勾选初始化，复制下URL</li>
<li>2.在eclipse新建项目然后在eclipse里添加git remote</li>
<li>3.commit -》push 完成</li>
<li>4.打开Git Bash 使用命令行再查看一下</li>
</ul>
<p><em>本地已有代码关联远程空仓库</em></p>
<ul>
<li><p>先在远程建立空仓库 一般各大平台也都有命令提示 </p>
<ul>
<li>传送门: <a href="https://gitee.com" target="_blank" rel="noopener">Gitee</a> | <a href="https://github.com/" target="_blank" rel="noopener">Github</a> | <a href="https://bitbucket.org/" target="_blank" rel="noopener">Bitbucket</a>  | <a href="https://gitlab.com/" target="_blank" rel="noopener">GitLab</a> …<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote add origin  https://github.com/Kuangcp/StudentManager.git</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>说明下上面的命令 第一条是设置了一个远程仓库 仓库名为origin URL是后面那个,一般默认的远程仓库名都叫origin</p>
<ul>
<li>名字可以随便取 但是提交就要标明仓库名了,而且分支也是一样的默认是master可以自己加别的分支. <code>git push -u 随便 随意</code></li>
</ul>
</li>
</ul>
<p><em>建立本地空仓库并关联到远程仓库</em></p>
<ul>
<li>1.先在GitHub上创建一个仓库，不勾选README（不然添加远程仓库还得pull一下README文件才能push）</li>
<li>如果本地没有则 <code>mkdir 库名</code>创建一个文件夹，最好和远程的库同名</li>
<li>2.在某本地项目根目录下运行 <code>Git Bash</code><ul>
<li>2.1 <code>git init</code> 初始化（建立 <code>.git</code> 目录）</li>
<li>2.2 <code>touch README.md</code></li>
<li>2.3 <code>git remote add origin master URL</code> 连上远程仓库</li>
<li>2.4 <code>git push -u origin master</code> 输入用户名，密码 （若因为没有上游节点就按提示输入命令建立初始节点即可 git push –setupstream origin master）</li>
<li>原因是没有指定本地dev分支与远程origin/dev分支的链接，根据提示，设置dev和origin/dev的链接：<code>git branch --set-upstream dev origin/dev</code> master同理</li>
</ul>
</li>
</ul>
<h3 id="配置GPG"><a href="#配置GPG" class="headerlink" title="配置GPG"></a>配置GPG</h3><blockquote>
<p><a href="http://www.ruanyifeng.com/blog/2013/07/gpg.html" target="_blank" rel="noopener">阮一峰:GPG入门教程</a></p>
</blockquote>
<ul>
<li>能够提高安全性,但是麻烦,不过向来这两者就是不可兼得的.</li>
</ul>
<hr>
<h3 id="实验楼上使用Github"><a href="#实验楼上使用Github" class="headerlink" title="实验楼上使用Github"></a>实验楼上使用Github</h3><blockquote>
<p>方便学习使用 </p>
</blockquote>
<ul>
<li><code>git clone URL</code> 复制下来，默认是master</li>
<li><code>git branch 新分支名</code> 新建一个分支，切换过去，使用的就是这个新分支放代码</li>
<li><code>git push origin 新分支名</code> add commit 之后就push</li>
<li><code>git fetch origin 已有分支</code> 下拉别的分支代码</li>
</ul>
<h3 id="码云"><a href="#码云" class="headerlink" title="码云"></a>码云</h3><blockquote>
<p><a href="http://git.mydoc.io/" target="_blank" rel="noopener">帮助文档</a> </p>
</blockquote>
<ul>
<li><a href="http://git.mydoc.io/?t=83152" target="_blank" rel="noopener">如何进行减少提交历史数量以及修改自己的commit中的邮箱</a></li>
<li><a href="https://my.oschina.net/jfinal/blog/215624?fromerr=ZTZ6c38X" target="_blank" rel="noopener">改写历史，永久删除git库的物理文件 </a></li>
</ul>
<hr>
<h2 id="【git初始化配置】"><a href="#【git初始化配置】" class="headerlink" title="【git初始化配置】"></a>【git初始化配置】</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">" "</span></span><br><span class="line">git config --global user.email <span class="string">" "</span></span><br><span class="line">git config --global color.ui  auto</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果是多个账号使用同一台电脑就不要配置这个，单独配置每个仓库下的用户名，邮箱即可<br><br><code>git config user.name &quot;&quot;</code></p>
</blockquote>
<h3 id="【VI编辑器的使用】"><a href="#【VI编辑器的使用】" class="headerlink" title="【VI编辑器的使用】"></a>【VI编辑器的使用】</h3><blockquote>
<p><a href="/Linux/Tool/Vim.md">详情</a></p>
</blockquote>
<ul>
<li>在pull或者合并分支的时候有时会遇到打开 VI编辑器 的状态  可以不输入(直接下面3,4步)<br><code>如果要输入解释的话就需要:</code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.按键盘字母 i 进入insert模式</span><br><span class="line">2.修改最上面那行黄色合并信息,可以不修改</span><br><span class="line">3.按键盘左上角&quot;Esc&quot;</span><br><span class="line">4.输入`:wq`,按回车键即可 或者 :x</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="【配置SSH连接上Github】"><a href="#【配置SSH连接上Github】" class="headerlink" title="【配置SSH连接上Github】"></a>【配置SSH连接上Github】</h2><blockquote>
<p>其他平台类似</p>
</blockquote>
<ul>
<li>【Markdown语法】: <ul>
<li>@用户名， @组织名 ；#编号 会连接到该仓库对应的Issue编号 。</li>
<li>通过 用户名/仓库名 #编号 来指定仓库的指定Issue</li>
</ul>
</li>
<li>【将Bash和GitHub绑定起来】：<ul>
<li>1.在GItHub上设置SSH key， 有一个即可</li>
<li>2.$ssh-keygen -t rsa -C “<a href="mailto:xxx@outlook.com" target="_blank" rel="noopener">xxx@outlook.com</a>“ 生成一个具有指定邮箱的rsa密钥对,然后复制到平台上</li>
<li>3.设置密钥对密码. 当然为了偷懒就不设置,不然每次提交都要输入….</li>
<li>4.测试SSH连接  $ssh -T <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a> 输入 密钥对 密码<ul>
<li>询问将github的ip加入已知列表中 选择yes</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="Github上fork别人项目的操作"><a href="#Github上fork别人项目的操作" class="headerlink" title="Github上fork别人项目的操作"></a>Github上fork别人项目的操作</h3><p><strong>合并对方最新代码</strong></p>
<blockquote>
<ol>
<li>首先fork一个项目, 然后clone自己所属的该项目下来,假设 原作者为A 自己为B  </li>
<li>添加原作者项目的URL 到该项目的远程分支列表中 <code>git add remote A A_URL</code>  </li>
<li>fetch作者的代码到本地 <code>git fetch A</code>  </li>
<li>新建本地分支, 并与A的远程分支绑定 <code>git branch A A/master</code> </li>
<li>合并两个分支代码 <code>git merge --no-ff A/master</code>  </li>
<li>push即可  </li>
</ol>
</blockquote>
<h3 id="Github上PR"><a href="#Github上PR" class="headerlink" title="Github上PR"></a>Github上PR</h3><blockquote>
<p><a href="https://github.com/mockito/mockito/wiki/Using-git-to-prepare-your-PR-to-have-a-clean-history" target="_blank" rel="noopener">Using git to prepare your PR to have a clean history</a></p>
</blockquote>
<hr>
<h3 id="gitingnore文件"><a href="#gitingnore文件" class="headerlink" title=".gitingnore文件"></a>.gitingnore文件</h3><blockquote>
<p><a href="https://github.com/github/gitignore" target="_blank" rel="noopener">Github: gitignore</a> | 一行是一个配置, 是独占一行的</p>
</blockquote>
<ul>
<li>使用 <code>#</code> 注释一行</li>
<li><code>test.txt</code>  忽略该文件</li>
<li><code>*.html</code>  忽略所有HTML后缀文件</li>
<li><code>*[o/a]</code>  忽略所有o和a后缀的文件</li>
<li><code>!foo.html</code>  不忽略该文件</li>
</ul>
<p><code>示例文件</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># maven #</span><br><span class="line">target/</span><br><span class="line"># IDEA #</span><br><span class="line">.idea/</span><br><span class="line">*.iml</span><br><span class="line">out/</span><br><span class="line"># eclipse #</span><br><span class="line">bin/</span><br><span class="line">.settings/</span><br><span class="line">.metadata/</span><br><span class="line">.classpath</span><br><span class="line">.project</span><br></pre></td></tr></table></figure></p>
<hr>
<h3 id="终端中显示当前分支"><a href="#终端中显示当前分支" class="headerlink" title="终端中显示当前分支"></a>终端中显示当前分支</h3><blockquote>
<p>使用 .git-prompt.sh 在Bash下显示当前分支   Windows环境不用看,安装的Git-for-windows软件已经会显示分支名了</p>
</blockquote>
<ul>
<li><code>wget https://raw.githubusercontent.com/git/git/master/contrib/completion/git-prompt.sh -O ~/.git-prompt.sh</code> 下载脚本</li>
<li><code>chmod +x ~/.git-prompt.sh</code> 赋予可执行权限</li>
<li>在 .bash_alases文件中添加<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">lightgreen=&apos;\[\033[1;32m\]&apos;</span><br><span class="line">lightcyan=&apos;\[\033[1;36m\]&apos;</span><br><span class="line">lightpurple=&apos;\[\033[1;35m\]&apos;</span><br><span class="line">yellow=&apos;\[\033[1;33m\]&apos;</span><br><span class="line">nocolor=&apos;\[\033[0m\]&apos;</span><br><span class="line">source ~/.git-prompt.sh</span><br><span class="line">set_bash_prompt()&#123;</span><br><span class="line">    #PS1=&quot;[e[32m]u[e[m]@[e[33m]W[e[36m]$(__git_ps1 &apos; (%s)&apos;)[e[31m]$[e[m]&quot;</span><br><span class="line">    PS1=&quot;$&#123;lightcyan&#125;\t$&#123;lightgreen&#125;\w$&#123;lightpurple&#125;$(__git_ps1 &apos; (%s)&apos;)$&#123;yellow&#125; → \[\e[m\]&quot;</span><br><span class="line">&#125;</span><br><span class="line">PROMPT_COMMAND=&quot;set_bash_prompt; $PROMPT_COMMAND&quot;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<h3 id="命令的自动补全"><a href="#命令的自动补全" class="headerlink" title="命令的自动补全"></a>命令的自动补全</h3><blockquote>
<p><a href="https://github.com/git/git/tree/master/contrib/completion" target="_blank" rel="noopener">git自动补全脚本GitHub地址</a></p>
</blockquote>
<ul>
<li>下载脚本 <code>wget https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash -o ~/.git-completion.bash</code><ul>
<li>在 .bashrc 或者 .bash_aliases 中添加 source ~/.git-completion.bash</li>
<li>重启终端或者 <code>source .bashrc</code>即可</li>
</ul>
</li>
<li>双击tab可以得到命令建议</li>
</ul>
<hr>
<h2 id="搭建Git服务器"><a href="#搭建Git服务器" class="headerlink" title="搭建Git服务器"></a>搭建Git服务器</h2><h3 id="使用git-daemon搭建简易-Server"><a href="#使用git-daemon搭建简易-Server" class="headerlink" title="使用git daemon搭建简易 Server"></a>使用git daemon搭建简易 Server</h3><p><em><code>目录结构</code></em><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">├── a</span><br><span class="line">│   └── .git</span><br><span class="line">└── b</span><br><span class="line">    └── .git</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>也就是说在仓库目录的父级目录 作为基础目录 (base-path)</p>
</blockquote>
<ul>
<li><p><code>git daemon --export-all --base-path=&#39;BASE_PATH&#39; --port=8080</code> 在 BASE_PATH 启动一个Git守护进程</p>
<ul>
<li><code>--export-all</code> 开放当前目录下所有项目</li>
<li><code>--enable=receive-pack</code> 为了安全，默认是仓库不能被修改，添加这个参数就可以push了</li>
<li><code>--base-path=&#39;&#39;</code> 指定开放的基本目录（指定开放别的路径）</li>
<li><code>--port=8080</code> 指定开放的端口</li>
<li><code>--verbose</code> 启动看到的日志信息更多</li>
</ul>
</li>
<li><p>克隆: <code>git clone git://localhost:8080/a</code> </p>
</li>
</ul>
<h3 id="【HTTP访问Git服务器】"><a href="#【HTTP访问Git服务器】" class="headerlink" title="【HTTP访问Git服务器】"></a>【HTTP访问Git服务器】</h3><ul>
<li>安装Apache： Web服务器</li>
<li><p>配置Apache服务器的开放的目录以及Git的路径 </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Location</span> /<span class="attr">git</span>&gt;</span></span><br><span class="line">    AuthType Basic </span><br><span class="line">    AuthName "GIT Repository" </span><br><span class="line">    AuthUserFile "/home/mythos/GitRemoteRepo/htpassed"</span><br><span class="line">    Require valid-user</span><br><span class="line"><span class="tag">&lt;/<span class="name">Location</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>切换到Apache的bin目录下：<code>htpasswd -cmb /home/mythos/GitRemoteRepo/htpsswd 账号名 密码</code></p>
</li>
<li>到仓库目录下 <code>git init --bare 程序项目名称</code></li>
<li><code>git clone http://localhost/git/程序项目名称</code> 输入用户名密码即可</li>
</ul>
<h4 id="【配置HTTPS】"><a href="#【配置HTTPS】" class="headerlink" title="【配置HTTPS】"></a>【配置HTTPS】</h4><ul>
<li>切换到Apache主目录下 <code>bin\openssl genrsa -des3 -out server.key 2048 -config conf\openssl.cnf</code> 输入密码</li>
<li><code>bin\openssl req -new -key server.key -out server.csr -config conf\openssl.cnf</code> 输入之前密码</li>
<li><code>bin\openssl x509 -req -days 3650 -in server.csr -signkey server.key -out server.crt</code> 输入之前密码</li>
<li>把server.key 更名为server.key.old :<code>bin\openssl rsa -in server.key.old -out server.key</code></li>
<li>将server.key server.crt 移动到conf</li>
<li><p>修改 httpd.conf 去掉如下三行的注释 # 字符</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">LoadModule socache_shmcb_module..</span><br><span class="line">LoadModule ssl_module..</span><br><span class="line">Include conf/extra...</span><br></pre></td></tr></table></figure>
</li>
<li><p>因为是自己建立的SSL证书 所以要去掉SSL验证 <code>git -c http.sslVerify=false clone URL</code></p>
</li>
<li>或者直接改配置文件，省的每次输这么多 <code>git config http.sslVerify false</code></li>
</ul>
<h4 id="【使用SSH登录GitServer】"><a href="#【使用SSH登录GitServer】" class="headerlink" title="【使用SSH登录GitServer】"></a>【使用SSH登录GitServer】</h4><ul>
<li style="list-style: none"><input type="checkbox"> 实践一下</li>
</ul>
<hr>
<h2 id="基础命令概述"><a href="#基础命令概述" class="headerlink" title="基础命令概述"></a>基础命令概述</h2><ul>
<li><code>git touch file1 file2</code> 新建三个文件</li>
<li><code>echo &quot;  &quot;&gt;&gt;file1</code> 修改文件file1</li>
<li><code>git rm 文件名</code> ： 删除文件至缓存区</li>
<li><code>git commit -am &quot; &quot;</code>从缓存提交（切记要先 commit 才能 push）</li>
<li><code>git diff</code>  ： 查看当前工作树和暂存区的差别</li>
<li><code>git diff --cached</code>：查看缓存中文件修改的痕迹和对比 输入q 退出</li>
<li><code>git log --graph</code>：查看（图形化）提交日志 输入q退出</li>
<li><code>git banrch</code>分支名 ：创建新的分支</li>
<li><code>git branch -a</code>查看当前分支信息</li>
<li><code>git checkout -b</code>：创建一个分支，并立即切换</li>
<li><code>git checkout -b feature-D origin/feature-D</code> 新建一个分支来接收同步后面那个远程仓库的分支</li>
<li><code>git pull</code>：获取最新的远程仓库分支</li>
<li><code>git pull origin feature-D</code>：只把本地的feature-D分支更新到最新</li>
<li><code>git reset --hard 哈希值</code>：数据库的回滚操作似的</li>
<li><code>git reflog</code>  查看仓库的操作日志</li>
<li><code>git mv -k oldName  newName</code> :更改文件名字</li>
</ul>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">usage: git [--version] [--<span class="built_in">help</span>] [-C &lt;path&gt;] [-c name=value]</span><br><span class="line">          [--<span class="built_in">exec</span>-path[=&lt;path&gt;]] [--html-path] [--man-path] [--info-path]</span><br><span class="line">          [-p | --paginate | --no-pager] [--no-replace-objects] [--bare]</span><br><span class="line">          [--git-dir=&lt;path&gt;] [--work-tree=&lt;path&gt;] [--namespace=&lt;name&gt;]</span><br><span class="line">          &lt;<span class="built_in">command</span>&gt; [&lt;args&gt;]</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="reset使用方式"><a href="#reset使用方式" class="headerlink" title="reset使用方式"></a>reset使用方式</h2><h3 id="1-回滚add操作"><a href="#1-回滚add操作" class="headerlink" title="1.回滚add操作"></a>1.回滚add操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">edit  (1)</span><br><span class="line">	git add a.txt b.txt</span><br><span class="line">   看邮件(2)</span><br><span class="line">	git reset(3) </span><br><span class="line">	git pull URL</span><br><span class="line">1.1 编辑了两个文件并且添加到了index</span><br><span class="line">1.2 接收邮件，发现某人要你pull，有一些改变需要你merge 下来</span><br><span class="line">1.3 然而你已经把index给改变了，因为当前的index 和 HEAD commit不匹配了，但是你知道，即将pull的东西不会影响</span><br><span class="line">	到a.txt 和 b.txt，因此你可以revert这两个文件的改变，revert后，那些改变依然在working directory中，因此需要执行git reset</span><br><span class="line">1.4 然后，执行了pull后 自动merge，两个文件依然在working directory中</span><br></pre></td></tr></table></figure>
<h3 id="2-回滚最近一次commit"><a href="#2-回滚最近一次commit" class="headerlink" title="2.回滚最近一次commit"></a>2.回滚最近一次commit</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">git commit ...</span><br><span class="line">	git reset --soft HEAD^(1)</span><br><span class="line">	edit (2)</span><br><span class="line">	git commit -a -c ORIG_HEAD(3)</span><br><span class="line">2.1 当提交后，你发现提交的代码不完善，需要重新编辑一下，执行 1 语句让working directory和reset之前一样，不做改变</span><br><span class="line">2.2 对working tree下的文件做修改</span><br><span class="line">2.3 然后使用reset之前那次commit的注释等相关信息都重新提交，注意老的HEAD会被备份到文件.git/ORIG_HEAD中，命令中就是引用了这个老的相关信息</span><br><span class="line">	-a 表示自动将所有的修改的和删除的文件都放进 stage area（理解为代码区，未被git跟踪的文件不受影响）</span><br><span class="line">	-c 表示 拿已经提交的commit对象中的信息来做这次的提交</span><br><span class="line">这条命令就是，将所有更改的文件加入到stage area中，并使用上次的提交信息来提交</span><br></pre></td></tr></table></figure>
<h3 id="3-回滚最近几次的commit并添加到一个新建的分支上去"><a href="#3-回滚最近几次的commit并添加到一个新建的分支上去" class="headerlink" title="3.回滚最近几次的commit并添加到一个新建的分支上去"></a>3.回滚最近几次的commit并添加到一个新建的分支上去</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">	git branch myth/test (1)</span><br><span class="line">	git reset --hard HEAD^3 (2)</span><br><span class="line">	git checkout myth/test (3)</span><br><span class="line">3.1 你已经提交了好几个commit，但是觉得不够成熟和完善，不足以添加到master分支上，所以在当前HEAD创建一个新分支</span><br><span class="line">3.2 然后回滚掉最近三次提交（删除）</span><br><span class="line">3.3 切换到新分支上就能对代码进行润色了，等待之后的merge</span><br></pre></td></tr></table></figure>
<h3 id="4-永久删除最近几次"><a href="#4-永久删除最近几次" class="headerlink" title="4.永久删除最近几次"></a>4.永久删除最近几次</h3><ul>
<li><code>commit git reset --hard HEAD~3</code></li>
</ul>
<h3 id="5-回滚merge和pull操作"><a href="#5-回滚merge和pull操作" class="headerlink" title="5.回滚merge和pull操作"></a>5.回滚merge和pull操作</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">	git pull URL (1)</span><br><span class="line">	git reset --hard (2)</span><br><span class="line">	git pull .topic/branch (3)</span><br><span class="line">	git reset --hard ORIG_HEAD (4)</span><br><span class="line">5.1 从origin上拉下来一些更新，但是产生了许多冲突，暂时又没时间去解决这些冲突，所以想撤销pull操作，等待以后来pull</span><br><span class="line">5.2 由于pull操作产生了冲突，因此所有pull下来的改变尚未提交，仍然在stage area中，这种情况下 </span><br><span class="line">	git reset --hard 与 git reset --hard HEAD 效果一样</span><br><span class="line">		都是清除那些使index和working directory乱套的东西</span><br><span class="line">5.3 将topic/branch 合并到当前的branch，这次没有冲突，并且合并后的更改自动提交</span><br><span class="line">5.4 但是此时又觉得将topic/branch合并过来又太早了，决定回滚merge操作，执行4语句  之前有说过，git reset操作会备份一个ORIG_HEAD，</span><br><span class="line">		pull和merge操作同样会，为了回滚操作</span><br></pre></td></tr></table></figure>
<h3 id="6-在被污染的working-tree中回滚merge或者pull"><a href="#6-在被污染的working-tree中回滚merge或者pull" class="headerlink" title="6.在被污染的working_tree中回滚merge或者pull"></a>6.在被污染的working_tree中回滚merge或者pull</h3><!-- <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">		git pull (1)</span><br><span class="line">		git reset --merge ORIG_HEAD (2)</span><br><span class="line">	6.1 即使在本地已经更改了tree，导致了index的变化，也可以放心的pull，前提是你知道将要pull的内容不会覆盖你的working tree中的内容</span><br><span class="line">	6.2 git pull 之后，你发现这次pull的有问题，想要撤销操作，如果使用git reset --hard ORIG_HEAD也可以，但是这会删除add的代码</span><br><span class="line">			使用 git reset --merge ORIG_HEAD 就可以避免回滚操作时删除add的代码</span><br><span class="line">```	</span><br><span class="line"></span><br><span class="line">### 7.被中断的工作流程</span><br></pre></td></tr></table></figure>
<p>在实际开发中经常出现这样的情形：你正在开发一个大的feature，此时来了一个紧急的BUG需要修复，但是目前在working tree 中的内容还不足以commit<br>        ，但是又必须切换到另外的branch去 fix bug<br>        git checkout feature;<br>        码代码<br>        git commit -a -m “暂时中断OO” (1)<br>        git checkout master<br>        修复bug<br>        git commit ;<br>        git checkout feature<br>        git reset –soft HEAD^ #go back to OO’s state (2)<br>        git reset (3)<br>    7.1 属于临时提交。随便加点注释<br>    7.2 这次reset删除了OO的commit，并且把working tree设置成提交OO之前的状态<br>    7.3 此时，在index中仍然留有OO提交时所做的uncommit changes，git reset 将会清理index成为尚未提交时的状态，便于之后的工作<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">### 8.Reset一个单独的文件</span><br></pre></td></tr></table></figure></p>
<p>git reset – a.txt (1)<br>git commit -am “Commit files inindex”  (2)<br>        git add a.txt  (3)<br>    8.1 把文件单独从index中去除<br>    8.2 将index中的文件提交<br>    8.3 再次添加回文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">### 9.保留working_tree并且丢弃一些commit</span><br></pre></td></tr></table></figure></p>
<pre><code>git tag start
    git checkout -b branch 1
    编写
    git commit .... (1)
    编写
    git checkout -b branch2 (2)
    git reset --keep start (3)
</code></pre><p><code>`</code></p>
<ul>
<li>9.1 这次是把branch1中的改变提交了</li>
<li>9.2 此时发现，之前的提交不属于这个branch，此时你新建了branch2，并切换到了该branch上</li>
<li>9.3 此时你可以使用reset –keep 把在start之后的commit清除掉，但是保持了working tree的不变</li>
</ul>
-->
        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2018-12-14T12:42:49.250Z" itemprop="dateUpdated">2018-12-14 20:42:49</time>
</span><br>


        
        这里可以写作者留言，标签和 hexo 中所有变量及辅助函数等均可调用，示例：<a href="/2018/12/14/Memo-Skills-Vcs-GitAction/" target="_blank" rel="external">http://blog.kuangcp.top/2018/12/14/Memo-Skills-Vcs-GitAction/</a>
        
    </div>
    
    <footer>
        <a href="http://blog.kuangcp.top">
            <img src="/img/avatar.jpg" alt="Kuangcp">
            Kuangcp
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            

            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.kuangcp.top/2018/12/14/Memo-Skills-Vcs-GitAction/&title=《Git实践》 — Kuangcp Blog&pic=http://blog.kuangcp.top/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.kuangcp.top/2018/12/14/Memo-Skills-Vcs-GitAction/&title=《Git实践》 — Kuangcp Blog&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.kuangcp.top/2018/12/14/Memo-Skills-Vcs-GitAction/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Git实践》 — Kuangcp Blog&url=http://blog.kuangcp.top/2018/12/14/Memo-Skills-Vcs-GitAction/&via=http://blog.kuangcp.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.kuangcp.top/2018/12/14/Memo-Skills-Vcs-GitAction/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/12/14/Memo-Skills-Vcs-GitBase/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">GitBase.md</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/12/14/Memo-Linux-Container-Docker/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Docker.md</h4>
      </a>
    </div>
  
</nav>



    

















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.png" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check" data-wechat="/img/wechat.png" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style="display:none">
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style="display:none">
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>Kuangcp &copy; 2015 - 2018</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://blog.kuangcp.top/2018/12/14/Memo-Skills-Vcs-GitAction/&title=《Git实践》 — Kuangcp Blog&pic=http://blog.kuangcp.top/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://blog.kuangcp.top/2018/12/14/Memo-Skills-Vcs-GitAction/&title=《Git实践》 — Kuangcp Blog&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://blog.kuangcp.top/2018/12/14/Memo-Skills-Vcs-GitAction/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Git实践》 — Kuangcp Blog&url=http://blog.kuangcp.top/2018/12/14/Memo-Skills-Vcs-GitAction/&via=http://blog.kuangcp.top" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://blog.kuangcp.top/2018/12/14/Memo-Skills-Vcs-GitAction/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACIUlEQVR42u3aQWrEMAwF0Nz/0il0VZg2/ZIyDLGfV2HIOH5eCMnyccTj/B7JOz/H63/PeBzvGBgYGI9lJNO9Tv3XO8l/E16+NgwMjH0YyWeup062phrck7VhYGBgVNO+JHO7/joGBgbGPOBeI5OAmwRoDAwMjF4R2ysyk9/zQH9DLY6BgfFAxqSwfPfzG/sbGBgYD2Gcg5GkjJOgXFgJBgbG0ozrFO2uGw55EzRpkUZLwcDA2IxRPe6vXstIDt2iy2oYGBhLM6pXKCbPCWa0uRgYGIsy8pBaDZq9tLJ5UQMDA2NpRq+wrDKuk8jeVo4KWgwMjIcw5gVntf2ZBPEE+Ut/AwMDY1FGvtBqaTpJE5szY2BgLM24fmlyfF+9VNEjYWBg7MDIF3RXYlctYqNNxMDAWJrR+9ikuJ03Ryv3LzAwMFZgzA/3J/tXTRwxMDD2ZOTH93lZW71kNj+ew8DAWJWRF66TtK/XWih3NjAwMBZlVMvIPJmbpIa3HbdhYGAsxOg1L/Md6iWL5YIWAwNjG0avAZCE2nny988vGBgYSzN6aVneMMhD8BGP8mULDAyMxzLO4qhWxr3585IYAwNjB0Y1wCWAfOo86cTAwMDIg+DkOd/LfA0YGBi7MXr3FiaH+5PCtVCFY2BgbM+ohshqq2DUwsTAwNiSUU3+cvYNh2sYGBgbMKqH9Z8tdDEwMHZjzBsDvVBevf41L4MxMDAeyPgCYb36CAzSUHkAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>





</body>
</html>
